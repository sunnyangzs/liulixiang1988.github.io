<!DOCTYPE html>
<html lang="zh">
<head>

        <title>[翻译]使用ASP.NET Web API 2、Owin和Identity来创建Token认证(1)</title>
        <meta charset="utf-8" />
        <link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Liu Lixiang的博客 Full Atom Feed" />
        <link href="/feeds/dotnet.atom.xml" type="application/atom+xml" rel="alternate" title="Liu Lixiang的博客 Categories Atom Feed" />


        <!-- Mobile viewport optimized: j.mp/bplateviewport -->
        <meta name="viewport" content="width=device-width,initial-scale=1, maximum-scale=1">

        <link rel="stylesheet" type="text/css" href="./theme/gumby.css" />
        <link rel="stylesheet" type="text/css" href="./theme/style.css" />
        <link rel="stylesheet" type="text/css" href="./theme/pygment.css" />

        <script src="./theme/js/libs/modernizr-2.6.2.min.js"></script>




</head>

<body id="index" class="home">


    <div class="container">

        <div class="row">

          <header id="banner" class="body">
                  <h1><a href="./">Liu Lixiang的博客 <small>数据科学/Python/Java</small></a></h1>
          </header><!-- /#banner -->

            <div id="navigation" class="navbar row">
              <a href="#" gumby-trigger="#navigation &gt; ul" class="toggle"><i class="icon-menu"></i></a>
             
              <ul class="columns">
                <li><a href="./">首页</a></li>

                <li><a href="/categories.html">分类</a></li>
                <li><a href="/tags.html">标签</a></li>
                <li><a href="/archives.html">归档</a></li>
                <li><a href="./pages/guan-yu.html">关于</a></li>

              </ul>
            </div>

<section id="content" class="body">

   <div class="row">
        <div class="eleven columns">


            <header>
              <h2 class="entry-title">
                <a href="./fan-yi-shi-yong-aspnet-web-api-2-owinhe-identitylai-chuang-jian-tokenren-zheng-1.html" rel="bookmark"
                   title="Permalink to [翻译]使用ASP.NET Web API 2、Owin和Identity来创建Token认证(1)">[翻译]使用ASP.NET Web API 2、Owin和Identity来创建Token认证(1)</a></h2>
           
            </header>
            <footer class="post-info">
              <abbr class="published" title="2014-10-30">
                四 30 十月 2014
              </abbr>
              <address class="vcard author">By 
                <a class="url fn" href="./author/liu-li-xiang.html"> 刘理想</a>
              </address>
            </footer><!-- /.post-info -->
            <div class="entry-content">
              <h1 id="aspnet-web-api-2owinidentitytoken1">使用ASP.NET Web API 2、Owin和Identity来创建Token认证(1)</h1>
<h2 id="0">0. 简介</h2>
<h3 id="01-token">0.1 Token认证</h3>
<h3 id="02-web-api">0.2 Web API</h3>
<hr />
<h2 id="1-api">1. 创建后端API</h2>
<h3 id="11-web-api">1.1 第一步 创建Web API项目</h3>
<p>使用VS2013，创建"ASP.NET Web应用程序"，解决方案名为AngularJSAuthentication，项目名为AngularJSAuthentication.API:</p>
<p><img alt="Alt text" src="images/dot-net-owin-1.png" /></p>
<h3 id="12-nuget">1.2 第二步 安装必要的NuGet包</h3>
<div class="highlight"><pre><span></span>Install-Package Microsoft.AspNet.WebApi.Owin -Version 5.1.2
Install-Package Microsoft.Owin.Host.SystemWeb -Version 2.1.0
</pre></div>


<p>其中，<code>Microsoft.Owin.Host.SystemWeb</code>包是用来Owin服务器的API能够在IIS上运行</p>
<h3 id="13-owinstartup">1.3 第三步 添加Owin"启动(Startup)"类</h3>
<p>右键，添加新类<code>Startup</code>，我们会修改好几次这个类，现在它应该是这个样子：</p>
<div class="highlight"><pre><span></span>using System.Web.Http;
using AngularJSAuthentication.API;
using Microsoft.Owin;
using Owin;

[assembly: OwinStartup(typeof (Startup))]

namespace AngularJSAuthentication.API
{
    public class Startup
    {
        public void Configuration(IAppBuilder app)
        {
            var config = new HttpConfiguration();
            WebApiConfig.Register(config);
            app.UseWebApi(config);
        }
    }
}
</pre></div>


<p><code>assembly</code>属性声明了启动时启动的类，也就是说<code>Startup</code>类在应用启动的时候会被调用。<code>Configuration</code>方法接收的参数<code>IAppBuilder</code>实例app是主机传过来的。<code>app</code>是一个接口，用来组成我们服务器的应用。</p>
<p><code>HttpConfiguration</code>对象用来配置路由，因此，我们把它传递给<code>WebApiConfig</code>类的<code>Register</code>方法。</p>
<p>最后，我们把<code>config</code>对象传递给<code>UserWebApi</code>扩展方法，实现ASP.NET Web API和Owin Server的管道。</p>
<p>通常，<code>WebApiConfig</code>由模板自动生成。如果没有，就在<code>App_Start</code>文件夹下创建：</p>
<div class="highlight"><pre><span></span>public static class WebApiConfig
{
    public static void Register(HttpConfiguration config)
    {

        // Web API routes
        config.MapHttpAttributeRoutes();

        config.Routes.MapHttpRoute(
            name: &quot;DefaultApi&quot;,
            routeTemplate: &quot;api/{controller}/{id}&quot;,
            defaults: new { id = RouteParameter.Optional }
        );

        var jsonFormatter = config.Formatters.OfType&lt;JsonMediaTypeFormatter&gt;().First();
        jsonFormatter.SerializerSettings.ContractResolver = new CamelCasePropertyNamesContractResolver();
    }
}
</pre></div>


<h3 id="14-globalasax">1.4 第四步 删除Global.asax类</h3>
<p>不再需要这个类，也不需要<code>Application_Start</code>事件，因为我们已经配置了<code>Startup</code>类，所以放心删除它吧。</p>
<h3 id="15-windows-identity-systemwindows">1.5 第五步 添加Windows Identity System(Windows身份认证系统)</h3>
<p>配置过Web API后，现在可以添加支持注册和验证用户的包了，安装如下包</p>
<div class="highlight"><pre><span></span>Install-Package Microsoft.AspNet.Identity.Owin -Version 2.0.1
Install-Package Microsoft.AspNet.Identity.EntityFramework -Version 2.0.1
</pre></div>


<p>第一个包用来支持ASP.NET Identity Owin，第二个包可以让ASP.NET Identity使用Entity Framework,这样我们就能保存用户到SQL Server数据库了。</p>
<p>现在我们需要添加一个Database context类，用来负责与数据库交互。因此，添加<code>AuthContext</code>类：</p>
<div class="highlight"><pre><span></span>public class AuthContext: IdentityDbContext&lt;IdentityUser&gt;
{
    public AuthContext(): base(&quot;AuthContext&quot;)
    {

    }
}
</pre></div>


<p>能看到这个类继承自<code>IdentityDbContext</code>类。可以把这个特殊类型的<code>DbContext</code>类。它支持所有Entity Framework的code-first映射，以及DbSet属性用来管理数据库的身份表。可以读<a href="http://odetocode.com/blogs/scott/archive/2014/01/03/asp-net-identity-with-the-entity-framework.aspx">Scott Allen的博客</a>了解更多。</p>
<p>现在，我们在<code>Models</code>文件夹下添加一个<code>UserModel</code>类，它包含一些用来验证注册请求。</p>
<div class="highlight"><pre><span></span>using System.ComponentModel.DataAnnotations;

namespace AngularJSAuthentication.API.Models
{
    public class UserModel
    {
        [Required]
        [Display(Name = &quot;用户名&quot;)]
        public string UserName { get; set; }

        [Required]
        [StringLength(100, ErrorMessage = &quot;{0}至少要有{2}个字符&quot;, MinimumLength = 6)]
        [DataType(DataType.Password)]
        [Display(Name = &quot;密码&quot;)]
        public string Password { get; set; }

        [DataType(DataType.Password)]
        [Display(Name = &quot;确认密码&quot;)]
        [Compare(&quot;Password&quot;, ErrorMessage = &quot;两次密码输入不一致&quot;)]
        public string ConfirmedPassword { get; set; }
    }
}
</pre></div>


<p>最后，我们在web.config中添加连接字符串：</p>
<div class="highlight"><pre><span></span><span class="nt">&lt;connectionStrings&gt;</span>
<span class="nt">&lt;add</span> <span class="na">name=</span><span class="s">&quot;AuthContext&quot;</span> <span class="na">connectionString=</span><span class="s">&quot;Data Source=.;Initial Catalog=AngularJSAuth;Integrated Security=SSPI;&quot;</span> <span class="na">providerName=</span><span class="s">&quot;System.Data.SqlClient&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/connectionStrings&gt;</span>
</pre></div>


<h3 id="16-aspnet-identity-system">1.6 第六步 添加仓库类来支持ASP.NET Identity System</h3>
<p>现在，我们要实现两个方法<code>RegisterUser</code>和<code>FindUser</code>，因此，我们添加一个名为<code>AuthRepository</code>的类：</p>
<div class="highlight"><pre><span></span>public class AuthRepository : IDisposable
{
    private readonly AuthContext _ctx;

    private readonly UserManager&lt;IdentityUser&gt; _userManager;

    public AuthRepository()
    {
        _ctx = new AuthContext();
        _userManager = new UserManager&lt;IdentityUser&gt;(new UserStore&lt;IdentityUser&gt;(_ctx));
    }

    public void Dispose()
    {
        _ctx.Dispose();
        _userManager.Dispose();
    }

    public async Task&lt;IdentityResult&gt; RegisterUser(UserModel userModel)
    {
        var user = new IdentityUser
        {
            UserName = userModel.UserName
        };

        IdentityResult result = await _userManager.CreateAsync(user, userModel.Password);

        return result;
    }

    public async Task&lt;IdentityUser&gt; FindUser(string username, string password)
    {
        IdentityUser user = await _userManager.FindAsync(username, password);
        return user;
    }
}
</pre></div>


<p>我们依赖<code>UserManager</code>来提供用户信息的逻辑操作。<code>UserManager</code>指导什么时候hash密码，怎么以及何时验证用户，以及如何管理请求。读<a href="http://odetocode.com/blogs/scott/archive/2014/01/20/implementing-asp-net-identity.aspx">ASP.NET Identity System</a>来了解更多。</p>
<h3 id="17-account-controller">1.7 第七步 添加我们的“账户”控制器("Account" Controller)</h3>
<p>现在是时候添加我们的第一个Web API控制器了，这个控制器用来注册新用户。在<code>Controllers</code>文件夹下添加一个空Web API 2的控制器<code>AccountController</code>：</p>
<div class="highlight"><pre><span></span><span class="k">[RoutePrefix(&quot;api/account&quot;)]</span>
<span class="err">public</span> <span class="err">class</span> <span class="err">AccountController</span> <span class="err">:</span> <span class="err">ApiController</span>
<span class="err">{</span>
    <span class="na">private AuthRepository _repo</span> <span class="o">=</span> <span class="s">null;</span>

    <span class="err">public</span> <span class="err">AccountController()</span>
    <span class="err">{</span>
        <span class="na">_repo</span> <span class="o">=</span> <span class="s">new AuthRepository();</span>
<span class="s">    }</span>

    <span class="err">//POST</span> <span class="err">/api/Acount/Register</span>
    <span class="k">[AllowAnonymous]</span>
    <span class="k">[Route(&quot;Register&quot;)]</span>
    <span class="err">public</span> <span class="err">async</span> <span class="err">Task&lt;IHttpActionResult&gt;</span> <span class="err">Register(UserModel</span> <span class="err">userModel)</span>
    <span class="err">{</span>
        <span class="err">if</span> <span class="err">(!ModelState.IsValid)</span>
        <span class="err">{</span>
            <span class="err">return</span> <span class="err">BadRequest(ModelState)</span><span class="c1">;</span>
        <span class="err">}</span>

        <span class="na">IdentityResult result</span> <span class="o">=</span> <span class="s">await _repo.RegisterUser(userModel);</span>
<span class="s">        IHttpActionResult errorResult = GetErrorResult(result);</span>
<span class="s">        if (errorResult != null)</span>
<span class="s">        {</span>
<span class="s">            return errorResult;</span>
<span class="s">        }</span>

        <span class="err">return</span> <span class="err">Ok()</span><span class="c1">;</span>
    <span class="err">}</span>

    <span class="err">protected</span> <span class="err">override</span> <span class="err">void</span> <span class="err">Dispose(bool</span> <span class="err">disposing)</span>
    <span class="err">{</span>
        <span class="err">if</span> <span class="err">(disposing)</span>
        <span class="err">{</span>
            <span class="err">_repo.Dispose()</span><span class="c1">;</span>
        <span class="err">}</span>
        <span class="err">base.Dispose(disposing)</span><span class="c1">;</span>
    <span class="err">}</span>

    <span class="err">private</span> <span class="err">IHttpActionResult</span> <span class="err">GetErrorResult(IdentityResult</span> <span class="err">result)</span>
    <span class="err">{</span>
        <span class="na">if (result</span> <span class="o">=</span><span class="s">= null)</span>
<span class="s">        {</span>
<span class="s">            return InternalServerError();</span>
<span class="s">        }</span>

        <span class="err">if</span> <span class="err">(!result.Succeeded)</span>
        <span class="err">{</span>
            <span class="na">if (result.Errors !</span><span class="o">=</span> <span class="s">null)</span>
<span class="s">            {</span>
<span class="s">                foreach (var error in result.Errors)</span>
<span class="s">                {</span>
<span class="s">                    ModelState.AddModelError(&quot;&quot;, error);</span>
<span class="s">                }</span>
<span class="s">            }</span>

            <span class="err">if</span> <span class="err">(ModelState.IsValid)</span>
            <span class="err">{</span>
                <span class="err">return</span> <span class="err">BadRequest()</span><span class="c1">;</span>
            <span class="err">}</span>
            <span class="err">return</span> <span class="err">BadRequest(ModelState)</span><span class="c1">;</span>
        <span class="err">}</span>
        <span class="err">return</span> <span class="err">null</span><span class="c1">;</span>
    <span class="err">}</span>
<span class="err">}</span>
</pre></div>


<p>任何人想要注册，必须使用HTTP POST请求'/api/account/register'，而且请求必须包含如下的JSON对象：</p>
<div class="highlight"><pre><span></span>{
    &quot;userName&quot;: &quot;liu&quot;,
    &quot;password&quot;: &quot;123456&quot;,
    &quot;confirmPassword&quot;: &quot;123456&quot;
}
</pre></div>


<p>现在可以使用HTTP POST请求网址：“http://localhost:port/api/account/register”，如果一切正常就会收到HTTP状态码200，而且数据库会自动在表<code>dbo.AspNetUsers</code>中创建一个用户。</p>
<p><strong>注意：</strong>通过HTTPS发送POST请求非常重要，因为敏感信息会被加密。</p>
<p><code>GetErrorResult</code>方法是一个帮助方法用来验证<code>UserModel</code>，并且返回相应的HTTP状态码。</p>
<h3 id="18-order-controller">1.8 第八步 添加具有安全保护的“订单”控制器(Order Controller)</h3>
<p>现在我们想要添加控制器来处理我们的订单，我们设定这个控制器为认证用户返回订单，为了保持简单我们返回静态数据。因此在<code>Controllers</code>下添加一个<code>OrdersController</code>：</p>
<div class="highlight"><pre><span></span><span class="k">[RoutePrefix(&quot;api/Orders&quot;)]</span>
<span class="err">public</span> <span class="err">class</span> <span class="err">OrdersController</span> <span class="err">:</span> <span class="err">ApiController</span>
<span class="err">{</span>
    <span class="err">//</span> <span class="err">GET</span> <span class="err">api/&lt;controller&gt;</span>
    <span class="k">[Authorize]</span>
    <span class="k">[Route(&quot;&quot;)]</span>
    <span class="err">public</span> <span class="err">IHttpActionResult</span> <span class="err">Get()</span>
    <span class="err">{</span>
        <span class="err">return</span> <span class="err">Ok(Order.CreateOrders())</span><span class="c1">;</span>
    <span class="err">}</span>

    <span class="c1">#region Helpers</span>

    <span class="err">public</span> <span class="err">class</span> <span class="err">Order</span>
    <span class="err">{</span>
        <span class="err">public</span> <span class="err">int</span> <span class="err">OrderID</span> <span class="err">{</span> <span class="err">get</span><span class="c1">; set; }</span>
        <span class="err">public</span> <span class="err">string</span> <span class="err">CustomerName</span> <span class="err">{</span> <span class="err">get</span><span class="c1">; set; }</span>
        <span class="err">public</span> <span class="err">string</span> <span class="err">ShipperCity</span> <span class="err">{</span> <span class="err">get</span><span class="c1">; set; }</span>
        <span class="err">public</span> <span class="err">Boolean</span> <span class="err">IsShipped</span> <span class="err">{</span> <span class="err">get</span><span class="c1">; set; }</span>

        <span class="err">public</span> <span class="err">static</span> <span class="err">List&lt;Order&gt;</span> <span class="err">CreateOrders()</span>
        <span class="err">{</span>
            <span class="na">var OrderList</span> <span class="o">=</span> <span class="s">new List&lt;Order&gt; </span>
<span class="s">            {</span>
<span class="s">                new Order {OrderID = 10248, CustomerName = &quot;Taiseer Joudeh&quot;, ShipperCity = &quot;Amman&quot;, IsShipped = true },</span>
<span class="s">                new Order {OrderID = 10249, CustomerName = &quot;Ahmad Hasan&quot;, ShipperCity = &quot;Dubai&quot;, IsShipped = false},</span>
<span class="s">                new Order {OrderID = 10250,CustomerName = &quot;Tamer Yaser&quot;, ShipperCity = &quot;Jeddah&quot;, IsShipped = false },</span>
<span class="s">                new Order {OrderID = 10251,CustomerName = &quot;Lina Majed&quot;, ShipperCity = &quot;Abu Dhabi&quot;, IsShipped = false},</span>
<span class="s">                new Order {OrderID = 10252,CustomerName = &quot;Yasmeen Rami&quot;, ShipperCity = &quot;Kuwait&quot;, IsShipped = true}</span>
<span class="s">            };</span>

            <span class="err">return</span> <span class="err">OrderList</span><span class="c1">;</span>
        <span class="err">}</span>
    <span class="err">}</span>

    <span class="c1">#endregion</span>
<span class="err">}</span>
</pre></div>


<p>注意我们在<code>Get</code>上加了一个<code>Authorize</code>属性，此时，如果访问 “http://localhost:port/api/orders”就会收到401未授权状态码。因为我们的请求当中并没有包含授权头信息。</p>
<h3 id="19-oauth-token">1.9 第九步 添加支持OAuth Token生成功能</h3>
<p>现在我们该让API增加OAuth功能</p>
<div class="highlight"><pre><span></span>Install-Package Microsoft.Owin.Security.OAuth -Version 2.1.0
</pre></div>


<p>打开<code>Startup</code>类，添加<code>ConfigureOAuth</code>方法，并在<code>Configuration</code>方法的第一行调用它：</p>
<div class="highlight"><pre><span></span>public class Startup
    {
        public void Configuration(IAppBuilder app)
        {
            var config = new HttpConfiguration();
            WebApiConfig.Register(config);
            app.UseWebApi(config);
        }

        public void ConfigreOAuth(IAppBuilder app)
        {
            var oauthServerOptions = new OAuthAuthorizationServerOptions
            {
                AllowInsecureHttp = true,
                TokenEndpointPath = new PathString(&quot;/token&quot;),
                AccessTokenExpireTimeSpan = TimeSpan.FromDays(1),
                Provider = new SimpleAuthorizationServerProvider()
            };

            app.UseOAuthAuthorizationServer(oauthServerOptions);
            app.UseOAuthBearerAuthentication(new OAuthBearerAuthenticationOptions());
        }
    }
</pre></div>


<p>我们创建了一个<code>OAuthAuthorizationServerOptions</code>类的实例，并且设置了如下的一些选项：</p>
<ul>
<li>产生令牌的路径<code>http://localhost:port/token</code>。后面我们会看到如何使用HTTP POST请求产生令牌</li>
<li>令牌24小时过期</li>
<li>我们指明如何验证用户的凭据，来返回令牌，就是使用后面我们要定义的一个类<code>SimpleAuthorizationServerProvider</code></li>
</ul>
<p>然后将选项实例传递给扩展方法<code>UseOAuthAuthorizationServer</code>，这样我们就将认证中间件添加到了管道当中去了。</p>
<h3 id="110-simpleauthorizationserverprovider">1.10 第十步 实现"SimpleAuthorizationServerProvider"类</h3>
<p>创建一个<code>Providers</code>文件夹，然后添加一个<code>SimpleAuthorizationServerProvider</code>类：</p>
<div class="highlight"><pre><span></span>public class SimpleAuthorizationServerProvider: OAuthAuthorizationServerProvider
{

    public override async Task ValidateClientAuthentication(OAuthValidateClientAuthenticationContext context)
    {
        context.Validated();
    }

    public override async Task GrantResourceOwnerCredentials(OAuthGrantResourceOwnerCredentialsContext context)
    {
        context.OwinContext.Response.Headers.Add(&quot;Access-Control-Allow-Origin&quot;, new []{&quot;*&quot;});

        using (var _repo = new AuthRepository())
        {
            IdentityUser user = await _repo.FindUser(context.UserName, context.Password);

            if (user == null)
            {
                context.SetError(&quot;invalid_grant&quot;, &quot;用户名或者密码不正确&quot;);
                return;
            }

            var identity = new ClaimsIdentity(context.Options.AuthenticationType);
            identity.AddClaim(new Claim(&quot;sub&quot;, context.UserName));
            identity.AddClaim(new Claim(&quot;role&quot;, &quot;user&quot;));

            context.Validated(identity);
        }
    }
}
</pre></div>


<p>该类继承自<code>OAuthAuthorizationServerProvider</code>，我们重写了两个方法，第一个是用来验证客户端的。本例中我们只有一个客户端，因此永远验证成功。</p>
<p>第二个方法<code>GrantResourceOwnerCredentials</code>负责验证发送给认证服务器令牌端的用户名和密码。</p>
<p>如果认证成功，我们创建一个<code>ClaimsIdentity</code>类，并且传递认证类型给它。然后添加两个请求(<code>sub</code>和<code>role</code>)，他们会被包含在签名令牌中。也可以添加别的,但是会增加令牌的大小。</p>
<p>最后使用<code>context.Validate(identity)</code>生成令牌。</p>
<p>为了让令牌中间件提供者允许CORS，我们需要添加头"Access-Control-Allow-Origin"到Owin的上下文中。如果忘记这么做，从浏览器中调用生成令牌就会失败。</p>
<h3 id="111-aspnet-web-apicors">1.11 第十一步 允许ASP.NET Web API支持CORS</h3>
<p>首先，需要安装对应的NuGet包：</p>
<div class="highlight"><pre><span></span>Install-Package Microsoft.Owin.Cors
</pre></div>


<p>然后再次打开类<code>Startup</code>，并添加</p>
<div class="highlight"><pre><span></span>public void Configuration(IAppBuilder app)
{
    var config = new HttpConfiguration();
    ConfigreOAuth(app);

    WebApiConfig.Register(config);
    //添加这行
    app.UseCors(CorsOptions.AllowAll);
    app.UseWebApi(config);
}
</pre></div>


<h3 id="112-api">1.12 第十二步 测试后端API</h3>
<p><img alt="Alt text" src="images/dot-net-owin-2.png" /></p>
<p>注意，content-type和payload type都是"x-www-form-urlencoded"类型，因此payload body将是form(grant_type=password&amp;username="liulx"&amp;password="123456")。如果一切正常我们会在响应中收到一个签名令牌。</p>
<p>"grant_type"指明授权类型，此处是密码。</p>
<p>现在既然有了token，我们就可以访问安全数据/api/Orders了：</p>
<p><img alt="Alt text" src="images/dot-net-owin-3.png" /></p>
            </div><!-- /.entry-content -->
        
 
            <section>
            <div id="DuoShuoComment" aria-live="polite">
<!-- 多说评论框 start -->
    <div class="ds-thread" data-thread-key="fan-yi-shi-yong-aspnet-web-api-2-owinhe-identitylai-chuang-jian-tokenren-zheng-1.html" data-title="[翻译]使用ASP.NET Web API 2、Owin和Identity来创建Token认证(1)" data-url="./fan-yi-shi-yong-aspnet-web-api-2-owinhe-identitylai-chuang-jian-tokenren-zheng-1.html"></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"liulixiang1988blog"};
    (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0] 
         || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
    </script>
<!-- 多说公共JS代码 end -->
            </div>
            </section> 

        </div><!-- /.eleven.columns -->

<div class="three columns">

<nav class="widget">
  <h4>社交</h4>
  <ul class="blank">
    <li><a href="https://www.zhihu.com/people/liulixiang1988">知乎</a></li>
    <li><a href="http://weibo.com/liulixiang1988">微博</a></li>
  </ul>
</nav>

<h4>分类</h4>
<ul class="blank">
		<li><a href="./category/android.html">Android</a></li>
		<li><a href="./category/database.html">Database</a></li>
		<li><a href="./category/dotnet.html">DotNet</a></li>
		<li><a href="./category/ionic.html">ionic</a></li>
		<li><a href="./category/java.html">Java</a></li>
		<li><a href="./category/python.html">Python</a></li>
		<li><a href="./category/sheng-huo.html">生活</a></li>
		<li><a href="./category/web.html">Web</a></li>
		<li><a href="./category/yi-dong-kai-fa.html">移动开发</a></li>
</ul>


<h4>标签</h4>
	<ul class="blank">
	    <li class="tag-[<pelican.contents.Article object at 0x104b02550>]"><a href="./tag/gradle.html">Gradle</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x104c4bf98>, <pelican.contents.Article object at 0x1051c22b0>, <pelican.contents.Article object at 0x1051ccef0>, <pelican.contents.Article object at 0x104981978>, <pelican.contents.Article object at 0x104c63400>, <pelican.contents.Article object at 0x104ff12b0>, <pelican.contents.Article object at 0x104981908>, <pelican.contents.Article object at 0x105260710>, <pelican.contents.Article object at 0x1049d3908>, <pelican.contents.Article object at 0x104c8b5f8>, <pelican.contents.Article object at 0x1047f1b00>, <pelican.contents.Article object at 0x104bef080>]"><a href="./tag/javascript.html">JavaScript</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x1049c7d30>, <pelican.contents.Article object at 0x1049c7c18>]"><a href="./tag/ionic.html">ionic</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x104722550>]"><a href="./tag/hibernate.html">Hibernate</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x105119a90>, <pelican.contents.Article object at 0x104b16278>, <pelican.contents.Article object at 0x10512d5f8>, <pelican.contents.Article object at 0x10524bc88>, <pelican.contents.Article object at 0x1052662e8>, <pelican.contents.Article object at 0x105135588>, <pelican.contents.Article object at 0x105147eb8>, <pelican.contents.Article object at 0x104b65fd0>, <pelican.contents.Article object at 0x104cbeac8>, <pelican.contents.Article object at 0x10524b2e8>, <pelican.contents.Article object at 0x1049563c8>, <pelican.contents.Article object at 0x104653d30>, <pelican.contents.Article object at 0x1044b3390>, <pelican.contents.Article object at 0x104b0b1d0>, <pelican.contents.Article object at 0x104966cf8>, <pelican.contents.Article object at 0x104943da0>, <pelican.contents.Article object at 0x1049d6e10>, <pelican.contents.Article object at 0x104956748>, <pelican.contents.Article object at 0x1051c1f28>]"><a href="./tag/css.html">CSS</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x10491edd8>]"><a href="./tag/gulp.html">Gulp</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x10474cc18>, <pelican.contents.Article object at 0x10474ff60>, <pelican.contents.Article object at 0x10477fda0>, <pelican.contents.Article object at 0x1046a7940>, <pelican.contents.Article object at 0x10472d048>]"><a href="./tag/dotnet.html">DotNet</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x104712fd0>]"><a href="./tag/mysql.html">MySQL</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x1049f2a58>, <pelican.contents.Article object at 0x1047cd0b8>, <pelican.contents.Article object at 0x104948320>, <pelican.contents.Article object at 0x10498e470>, <pelican.contents.Article object at 0x104956160>, <pelican.contents.Article object at 0x1049a40f0>, <pelican.contents.Article object at 0x10477beb8>, <pelican.contents.Article object at 0x10497aa90>, <pelican.contents.Article object at 0x1049c6828>]"><a href="./tag/jsp.html">JSP</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x104b04a20>]"><a href="./tag/phonegap.html">PhoneGap</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x103bdbdd8>, <pelican.contents.Article object at 0x1047262b0>, <pelican.contents.Article object at 0x1046ed400>]"><a href="./tag/life.html">life</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x10471f8d0>]"><a href="./tag/flaskbi-ji.html">Flask笔记</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x104b5ada0>, <pelican.contents.Article object at 0x104bebba8>]"><a href="./tag/kotlin.html">Kotlin</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x104bebda0>]"><a href="./tag/c.html">C#</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x104606d30>, <pelican.contents.Article object at 0x10462e898>, <pelican.contents.Article object at 0x105149e80>, <pelican.contents.Article object at 0x104ca5f98>, <pelican.contents.Article object at 0x10495f240>, <pelican.contents.Article object at 0x104b25b70>, <pelican.contents.Article object at 0x104fdbef0>, <pelican.contents.Article object at 0x104bf2828>, <pelican.contents.Article object at 0x104494128>, <pelican.contents.Article object at 0x104634320>, <pelican.contents.Article object at 0x104614940>, <pelican.contents.Article object at 0x104614278>, <pelican.contents.Article object at 0x104491dd8>, <pelican.contents.Article object at 0x1044943c8>]"><a href="./tag/androidxue-xi-bi-ji.html">Android学习笔记</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x10474cac8>]"><a href="./tag/functional-programming.html">Functional Programming</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x103bf7ef0>, <pelican.contents.Article object at 0x104606d30>, <pelican.contents.Article object at 0x10462e898>, <pelican.contents.Article object at 0x105290e80>, <pelican.contents.Article object at 0x104c78f60>, <pelican.contents.Article object at 0x105149e80>, <pelican.contents.Article object at 0x104ca5f98>, <pelican.contents.Article object at 0x10495f240>, <pelican.contents.Article object at 0x104b25b70>, <pelican.contents.Article object at 0x104fdbef0>, <pelican.contents.Article object at 0x104bf2828>, <pelican.contents.Article object at 0x104494128>, <pelican.contents.Article object at 0x104634320>, <pelican.contents.Article object at 0x104614940>, <pelican.contents.Article object at 0x104614278>, <pelican.contents.Article object at 0x104491dd8>, <pelican.contents.Article object at 0x1044943c8>]"><a href="./tag/android.html">Android</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x105149e80>]"><a href="./tag/androiyue-hou-ji-fen.html">Androi阅后即焚</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x104c4bf98>, <pelican.contents.Article object at 0x1051c22b0>, <pelican.contents.Article object at 0x1051ccef0>, <pelican.contents.Article object at 0x104981978>, <pelican.contents.Article object at 0x104ff12b0>, <pelican.contents.Article object at 0x104981908>, <pelican.contents.Article object at 0x105260710>]"><a href="./tag/react.html">React</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x104b42b00>, <pelican.contents.Article object at 0x104c9bc50>, <pelican.contents.Article object at 0x105198dd8>, <pelican.contents.Article object at 0x104b454e0>, <pelican.contents.Article object at 0x1049dda20>, <pelican.contents.Article object at 0x104b5ab38>, <pelican.contents.Article object at 0x104b02550>, <pelican.contents.Article object at 0x10474cac8>, <pelican.contents.Article object at 0x104722550>, <pelican.contents.Article object at 0x1049267f0>, <pelican.contents.Article object at 0x104b067f0>, <pelican.contents.Article object at 0x1049e6160>, <pelican.contents.Article object at 0x104b162e8>, <pelican.contents.Article object at 0x1049f2a58>, <pelican.contents.Article object at 0x1047cd0b8>, <pelican.contents.Article object at 0x104948320>, <pelican.contents.Article object at 0x10498e470>, <pelican.contents.Article object at 0x104956160>, <pelican.contents.Article object at 0x1049a40f0>, <pelican.contents.Article object at 0x10477beb8>, <pelican.contents.Article object at 0x10497aa90>, <pelican.contents.Article object at 0x1049c6828>]"><a href="./tag/java.html">Java</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x1046e1ef0>, <pelican.contents.Article object at 0x104758be0>, <pelican.contents.Article object at 0x104755080>]"><a href="./tag/django.html">Django</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x104be4908>]"><a href="./tag/jquery.html">jQuery</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x1049664a8>]"><a href="./tag/maven.html">Maven</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x104606fd0>, <pelican.contents.Article object at 0x1046b1f28>, <pelican.contents.Article object at 0x1046984e0>, <pelican.contents.Article object at 0x1046ccc18>, <pelican.contents.Article object at 0x104619f98>, <pelican.contents.Article object at 0x10468e0b8>]"><a href="./tag/angular.html">Angular</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x104ca5f98>, <pelican.contents.Article object at 0x10495f240>, <pelican.contents.Article object at 0x104b25b70>, <pelican.contents.Article object at 0x104fdbef0>, <pelican.contents.Article object at 0x104bf2828>]"><a href="./tag/androibo-ke-yue-du.html">Androi博客阅读</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x104bebda0>]"><a href="./tag/nancy.html">Nancy</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x1049e6160>, <pelican.contents.Article object at 0x104b162e8>]"><a href="./tag/servlet.html">Servlet</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x104bebda0>]"><a href="./tag/net.html">.NET</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x104735630>, <pelican.contents.Article object at 0x1046e1ef0>, <pelican.contents.Article object at 0x104758be0>, <pelican.contents.Article object at 0x104755080>, <pelican.contents.Article object at 0x10466e3c8>, <pelican.contents.Article object at 0x104735160>]"><a href="./tag/python.html">Python</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x1051a4400>, <pelican.contents.Article object at 0x105181e48>, <pelican.contents.Article object at 0x105181f60>]"><a href="./tag/compass.html">compass</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x10474cc18>, <pelican.contents.Article object at 0x10474ff60>, <pelican.contents.Article object at 0x10477fda0>, <pelican.contents.Article object at 0x1046a7940>, <pelican.contents.Article object at 0x10472d048>]"><a href="./tag/aspnet-mvc.html">ASP.NET MVC</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x1049d3908>, <pelican.contents.Article object at 0x104726748>, <pelican.contents.Article object at 0x1051a4400>, <pelican.contents.Article object at 0x105181e48>, <pelican.contents.Article object at 0x105181f60>]"><a href="./tag/css3.html">CSS3</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x1046e1ef0>]"><a href="./tag/bu-shu.html">部署</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x104948a20>, <pelican.contents.Article object at 0x1046ed400>]"><a href="./tag/pelican.html">Pelican</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x1052e7f98>, <pelican.contents.Article object at 0x10528fdd8>, <pelican.contents.Article object at 0x10515f0f0>]"><a href="./tag/netty.html">Netty</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x104b5ada0>, <pelican.contents.Article object at 0x104bebba8>]"><a href="./tag/xue-xi-bi-ji.html">学习笔记</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x103c1d208>]"><a href="./tag/android-studio.html">Android Studio</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x104b42b00>, <pelican.contents.Article object at 0x104c9bc50>, <pelican.contents.Article object at 0x105198dd8>, <pelican.contents.Article object at 0x104b454e0>, <pelican.contents.Article object at 0x1049267f0>]"><a href="./tag/spring.html">Spring</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x105147eb8>, <pelican.contents.Article object at 0x104b65fd0>, <pelican.contents.Article object at 0x104cbeac8>, <pelican.contents.Article object at 0x10524b2e8>, <pelican.contents.Article object at 0x1049563c8>, <pelican.contents.Article object at 0x104653d30>, <pelican.contents.Article object at 0x1044b3390>, <pelican.contents.Article object at 0x104b0b1d0>, <pelican.contents.Article object at 0x104966cf8>, <pelican.contents.Article object at 0x104943da0>, <pelican.contents.Article object at 0x1049d6e10>, <pelican.contents.Article object at 0x1051c1f28>]"><a href="./tag/less.html">LESS</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x104b5e9b0>, <pelican.contents.Article object at 0x1047f1e10>, <pelican.contents.Article object at 0x1044b1358>, <pelican.contents.Article object at 0x1046b1668>]"><a href="./tag/shu-ju-fen-xi.html">数据分析</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x104c8b5f8>]"><a href="./tag/mo-kuai-hua.html">模块化</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x1046a79e8>, <pelican.contents.Article object at 0x10471f8d0>]"><a href="./tag/flask.html">Flask</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x1049c7d30>, <pelican.contents.Article object at 0x1049c7c18>]"><a href="./tag/yi-dong-kai-fa.html">移动开发</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x105147eb8>, <pelican.contents.Article object at 0x104b65fd0>, <pelican.contents.Article object at 0x104cbeac8>, <pelican.contents.Article object at 0x10524b2e8>, <pelican.contents.Article object at 0x1049563c8>, <pelican.contents.Article object at 0x104653d30>, <pelican.contents.Article object at 0x1044b3390>, <pelican.contents.Article object at 0x104b0b1d0>, <pelican.contents.Article object at 0x104966cf8>, <pelican.contents.Article object at 0x104943da0>, <pelican.contents.Article object at 0x1049d6e10>, <pelican.contents.Article object at 0x104956748>]"><a href="./tag/html.html">HTML</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x1051a4400>, <pelican.contents.Article object at 0x105181e48>, <pelican.contents.Article object at 0x105181f60>, <pelican.contents.Article object at 0x105119a90>, <pelican.contents.Article object at 0x104b16278>, <pelican.contents.Article object at 0x10512d5f8>, <pelican.contents.Article object at 0x10524bc88>, <pelican.contents.Article object at 0x1052662e8>, <pelican.contents.Article object at 0x105135588>]"><a href="./tag/sass.html">sass</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x104725c50>]"><a href="./tag/exmobi.html">Exmobi</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x104606fd0>, <pelican.contents.Article object at 0x1046b1f28>, <pelican.contents.Article object at 0x1046984e0>, <pelican.contents.Article object at 0x1046ccc18>, <pelican.contents.Article object at 0x104619f98>, <pelican.contents.Article object at 0x10468e0b8>, <pelican.contents.Article object at 0x104b067f0>, <pelican.contents.Article object at 0x1049e6160>, <pelican.contents.Article object at 0x104b162e8>, <pelican.contents.Article object at 0x1049f2a58>, <pelican.contents.Article object at 0x1047cd0b8>, <pelican.contents.Article object at 0x104948320>, <pelican.contents.Article object at 0x10498e470>, <pelican.contents.Article object at 0x104956160>, <pelican.contents.Article object at 0x1049a40f0>, <pelican.contents.Article object at 0x10477beb8>, <pelican.contents.Article object at 0x10497aa90>, <pelican.contents.Article object at 0x1049c6828>, <pelican.contents.Article object at 0x10474cc18>, <pelican.contents.Article object at 0x10474ff60>, <pelican.contents.Article object at 0x10477fda0>, <pelican.contents.Article object at 0x1046a7940>, <pelican.contents.Article object at 0x10472d048>, <pelican.contents.Article object at 0x104bebda0>]"><a href="./tag/web.html">Web</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x104c8b5f8>]"><a href="./tag/requirejs.html">RequireJS</a></li>
</ul>

</div> </div><!-- /.row -->


</section>

       </div><!-- /.row -->
    </div><!-- /.container -->


       <div class="container.nopad bg">

    
        <footer id="credits" class="row">
          <div class="seven columns left-center">

                   <address id="about" class="vcard body">
                    Proudly powered by <a href="http://getpelican.com/">Pelican</a>,
                    which takes great advantage of <a href="http://python.org">Python</a>.
                    <br />
                    Based on the <a target="_blank" href="http://gumbyframework.com">Gumby Framework</a>
                    </address>
          </div>


          <div class="seven columns">
            <div class="row">
              <ul class="socbtns">





              </ul>
            </div>
          </div>
        </footer>

    </div>


  <script src="./theme/js/libs/jquery-1.9.1.min.js"></script>
  <script src="./theme/js/libs/gumby.min.js"></script>
  <script src="./theme/js/plugins.js"></script>
</body>
</html>