<!DOCTYPE html>
<html lang="zh">
<head>

        <title>Kotlin学习笔记</title>
        <meta charset="utf-8" />
        <link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Liu Lixiang的博客 Full Atom Feed" />
        <link href="/feeds/java.atom.xml" type="application/atom+xml" rel="alternate" title="Liu Lixiang的博客 Categories Atom Feed" />


        <!-- Mobile viewport optimized: j.mp/bplateviewport -->
        <meta name="viewport" content="width=device-width,initial-scale=1, maximum-scale=1">

        <link rel="stylesheet" type="text/css" href="./theme/gumby.css" />
        <link rel="stylesheet" type="text/css" href="./theme/style.css" />
        <link rel="stylesheet" type="text/css" href="./theme/pygment.css" />

        <script src="./theme/js/libs/modernizr-2.6.2.min.js"></script>




</head>

<body id="index" class="home">


    <div class="container">

        <div class="row">

          <header id="banner" class="body">
                  <h1><a href="./">Liu Lixiang的博客 <small>数据科学/Python/Java</small></a></h1>
          </header><!-- /#banner -->

            <div id="navigation" class="navbar row">
              <a href="#" gumby-trigger="#navigation &gt; ul" class="toggle"><i class="icon-menu"></i></a>
             
              <ul class="columns">
                <li><a href="./">首页</a></li>

                <li><a href="/categories.html">分类</a></li>
                <li><a href="/tags.html">标签</a></li>
                <li><a href="/archives.html">归档</a></li>
                <li><a href="./pages/guan-yu.html">关于</a></li>

              </ul>
            </div>

<section id="content" class="body">

   <div class="row">
        <div class="eleven columns">


            <header>
              <h2 class="entry-title">
                <a href="./kotlinxue-xi-bi-ji.html" rel="bookmark"
                   title="Permalink to Kotlin学习笔记">Kotlin学习笔记</a></h2>
           
            </header>
            <footer class="post-info">
              <abbr class="published" title="2016-03-01">
                二 01 三月 2016
              </abbr>
              <address class="vcard author">By 
                <a class="url fn" href="./author/liu-li-xiang.html"> 刘理想</a>
              </address>
            </footer><!-- /.post-info -->
            <div class="entry-content">
                <div class="toc">
<ul>
<li><a href="#0-kotlin">0. Kotlin简介</a><ul>
<li><a href="#01">0.1 简介</a></li>
<li><a href="#02-kotlin">0.2 Kotlin安装</a></li>
<li><a href="#03-hello-kotlin">0.3 Hello, Kotlin</a></li>
</ul>
</li>
<li><a href="#1">1. 类型和变量</a><ul>
<li><a href="#11-variable-declarations">1.1 变量声明(Variable Declarations)</a></li>
<li><a href="#12-type-deduction">1.2 类型推导(Type Deduction)</a></li>
<li><a href="#13-ranges">1.3 Ranges</a></li>
<li><a href="#14">1.4 数组</a></li>
<li><a href="#15-strings-and-string-interpolation">1.5 Strings and String Interpolation</a></li>
</ul>
</li>
<li><a href="#2">2. 控制流</a><ul>
<li><a href="#21-nullability">2.1 Nullability</a></li>
<li><a href="#22-if">2.2 If 语句</a></li>
<li><a href="#23-flow-based-typing">2.3 根据循环自动类型转换(Flow-Based Typing)</a></li>
<li><a href="#24-forfor-iteration">2.4 for遍历(for Iteration)</a></li>
<li><a href="#25-when">2.5 when表达式</a></li>
</ul>
</li>
<li><a href="#3">3. 函数</a><ul>
<li><a href="#31-top-level-function">3.1 顶层函数(Top-Level Function)</a></li>
<li><a href="#32-return-types-and-arguments">3.2 返回类型和参数(Return Types and Arguments)</a></li>
<li><a href="#33-variable-argument-functions">3.3 可变长参数函数(Variable-Argument Functions)</a></li>
<li><a href="#34-local-aka-nested-or-inner-functions">3.4 内签函数(Local a.k.a. Nested or Inner Functions)</a></li>
<li><a href="#35-extension-functions-and-properties">3.5 扩展函数和扩展属性(Extension Functions and Properties)</a></li>
<li><a href="#36-infix-functions">3.6 中缀函数(Infix Functions)</a></li>
</ul>
</li>
<li><a href="#4-lambda">4 Lambda函数</a><ul>
<li><a href="#41-lambda">4.1 Lambda函数</a></li>
<li><a href="#42">4.2 高阶函数</a></li>
<li><a href="#43">4.3 带接受者的函数类型</a></li>
<li><a href="#44-functors">4.4 Functors</a></li>
</ul>
</li>
<li><a href="#5">5 类</a><ul>
<li><a href="#51-property">5.1 属性(property)</a></li>
<li><a href="#52">5.2 构造函数和初始化</a></li>
<li><a href="#53-delegated-properties">5.3 委托属性(Delegated Properties)</a></li>
<li><a href="#54-data-classes">5.4 数据类(Data Classes)</a></li>
<li><a href="#55-singleton">5.5 单例(Singleton)</a></li>
<li><a href="#56-companion-objects">5.6 伴随对象(Companion Objects)</a></li>
<li><a href="#57-inheritance">5.7 继承(Inheritance)</a></li>
<li><a href="#58-interfaces">5.8 接口(Interfaces)</a></li>
<li><a href="#59-class-delegation">5.9 类委托(Class Delegation)</a></li>
</ul>
</li>
<li><a href="#6">6 其他</a><ul>
<li><a href="#61-enumerations">6.1 枚举(Enumerations)</a></li>
<li><a href="#62-exceptions">6.2 异常(Exceptions)</a></li>
<li><a href="#63-operator-overloads">6.3 操作符重载(Operator Overloads)</a></li>
<li><a href="#64-type-safe-builders">6.4 Type-Safe Builders</a></li>
</ul>
</li>
</ul>
</div>
              
<h2 id="0-kotlin">0. Kotlin简介</h2>
<h3 id="01">0.1 简介</h3>
<h3 id="02-kotlin">0.2 Kotlin安装</h3>
<h3 id="03-hello-kotlin">0.3 Hello, Kotlin</h3>
<div class="highlight"><pre><span></span><span class="k">fun</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">:</span><span class="n">Array</span><span class="p">&lt;</span><span class="n">String</span><span class="p">&gt;)</span>
<span class="p">{</span>
    <span class="n">println</span><span class="p">(</span><span class="s">"Hello, Kotlin!"</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
<h2 id="1">1. 类型和变量</h2>
<h3 id="11-variable-declarations">1.1 变量声明(Variable Declarations)</h3>
<div class="highlight"><pre><span></span><span class="k">fun</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">:</span> <span class="n">Array</span><span class="p">&lt;</span><span class="n">String</span><span class="p">&gt;)</span> <span class="p">{</span>
    <span class="n">val_declarations</span><span class="p">()</span>
<span class="p">}</span>

<span class="k">fun</span> <span class="nf">val_declarations</span><span class="p">(){</span>
    <span class="c1">//val声明的变量不能更改</span>
    <span class="k">val</span> <span class="py">a</span><span class="p">:</span><span class="n">Int</span> <span class="p">=</span> <span class="m">64</span>
    <span class="k">val</span> <span class="py">b</span><span class="p">:</span><span class="n">Long</span> <span class="p">=</span> <span class="m">123</span>

    <span class="c1">//这种事不行的,必须每个占一行:</span>
    <span class="c1">//val c = 3, d = 4</span>

    <span class="k">val</span> <span class="py">c</span><span class="p">:</span><span class="n">Float</span> <span class="p">=</span> <span class="m">3.4f</span> <span class="c1">//后面跟'F'或者'f'</span>
    <span class="k">val</span> <span class="py">d</span><span class="p">:</span><span class="n">Double</span> <span class="p">=</span> <span class="m">3.4</span>
    <span class="k">val</span> <span class="py">e</span><span class="p">:</span><span class="n">Double</span> <span class="p">=</span> <span class="m">12.3</span><span class="n">e5</span>
    <span class="c1">//不赋值的val声明</span>
    <span class="k">val</span> <span class="py">f</span><span class="p">:</span> <span class="n">Int</span>
    <span class="n">f</span> <span class="p">=</span> <span class="m">13</span>

    <span class="k">val</span> <span class="py">g</span><span class="p">:</span><span class="n">StringBuffer</span> <span class="p">=</span> <span class="n">StringBuffer</span><span class="p">(</span><span class="s">"test"</span><span class="p">)</span>
    <span class="n">g</span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="s">"T"</span><span class="p">)</span>
    <span class="c1">//打印</span>
    <span class="n">println</span><span class="p">(</span><span class="s">"$a $b $c $d $e $f"</span><span class="p">)</span>
    <span class="n">println</span><span class="p">(</span><span class="s">"$g"</span><span class="p">)</span>

    <span class="c1">//可更改的变量</span>
    <span class="k">var</span> <span class="py">h</span><span class="p">:</span><span class="n">Int</span> <span class="p">=</span> <span class="m">123</span>
    <span class="n">h</span> <span class="p">=</span> <span class="m">45</span>
    <span class="n">println</span><span class="p">(</span><span class="s">"$h"</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
<h3 id="12-type-deduction">1.2 类型推导(Type Deduction)</h3>
<p>类型能够根据赋值进行推到</p>
<div class="highlight"><pre><span></span><span class="k">fun</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">:</span> <span class="n">Array</span><span class="p">&lt;</span><span class="n">String</span><span class="p">&gt;)</span> <span class="p">{</span>
    <span class="n">val_declarations</span><span class="p">()</span>
<span class="p">}</span>

<span class="k">fun</span> <span class="nf">val_declarations</span><span class="p">(){</span>
    <span class="c1">//val声明的变量不能更改</span>
    <span class="k">val</span> <span class="py">a</span> <span class="p">=</span> <span class="m">64</span>
    <span class="k">val</span> <span class="py">b</span><span class="p">=</span> <span class="m">123</span>
    <span class="k">val</span> <span class="py">c</span> <span class="p">=</span> <span class="m">3.4f</span> <span class="c1">//后面跟'F'或者'f'</span>
    <span class="k">val</span> <span class="py">d</span> <span class="p">=</span> <span class="m">3.4</span>
    <span class="k">val</span> <span class="py">e</span> <span class="p">=</span> <span class="m">12.3</span><span class="n">e5</span>
    <span class="c1">//不赋值的val声明，变量类型不能省略</span>
    <span class="k">val</span> <span class="py">f</span><span class="p">:</span> <span class="n">Int</span>
    <span class="n">f</span> <span class="p">=</span> <span class="m">13</span>

    <span class="k">val</span> <span class="py">g</span> <span class="p">=</span> <span class="n">StringBuffer</span><span class="p">(</span><span class="s">"test"</span><span class="p">)</span>
    <span class="n">g</span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="s">"T"</span><span class="p">)</span>
    <span class="c1">//打印</span>
    <span class="n">println</span><span class="p">(</span><span class="s">"$a $b $c $d $e $f"</span><span class="p">)</span>
    <span class="n">println</span><span class="p">(</span><span class="s">"$g"</span><span class="p">)</span>

    <span class="c1">//可更改的变量</span>
    <span class="k">var</span> <span class="py">h</span> <span class="p">=</span> <span class="m">123</span>
    <span class="n">h</span> <span class="p">=</span> <span class="m">45</span>
    <span class="n">println</span><span class="p">(</span><span class="s">"$h"</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
<h3 id="13-ranges">1.3 Ranges</h3>
<div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm"> * Created by liulixiang on 16/2/26.</span>
<span class="cm"> */</span>
<span class="k">fun</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">:</span> <span class="n">Array</span><span class="p">&lt;</span><span class="n">String</span><span class="p">&gt;)</span> <span class="p">{</span>
    <span class="n">ranges</span><span class="p">()</span>
<span class="p">}</span>

<span class="k">fun</span> <span class="nf">ranges</span><span class="p">(){</span>
    <span class="k">val</span> <span class="py">a</span><span class="p">:</span> <span class="n">IntRange</span> <span class="p">=</span> <span class="m">1.</span><span class="p">.</span><span class="m">10</span> <span class="c1">//闭区间,而不是左闭右开. 1, 2, ..., 10(含10)</span>
    <span class="c1">//遍历range,使用in语法</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">x</span> <span class="k">in</span> <span class="n">a</span><span class="p">)</span> <span class="n">println</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

    <span class="c1">//除了上面的声明方式,还有以下声明方式:</span>
    <span class="k">val</span> <span class="py">b</span> <span class="p">=</span> <span class="m">1.</span><span class="n">rangeTo</span><span class="p">(</span><span class="m">10</span><span class="p">)</span>

    <span class="n">println</span><span class="p">(</span><span class="s">"=====逆序====="</span><span class="p">)</span>
    <span class="k">val</span> <span class="py">c</span><span class="p">:</span><span class="n">IntProgression</span> <span class="p">=</span> <span class="n">b</span><span class="p">.</span><span class="n">reversed</span><span class="p">()</span>
    <span class="k">for</span><span class="p">(</span><span class="n">x</span> <span class="k">in</span> <span class="n">c</span><span class="p">)</span> <span class="n">println</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

    <span class="n">println</span><span class="p">(</span><span class="s">"=====range求和====="</span><span class="p">)</span>
    <span class="n">println</span><span class="p">(</span><span class="s">"sum of ints $c = ${c.sum()}"</span><span class="p">)</span>

    <span class="n">println</span><span class="p">(</span><span class="s">"=====递减的range====="</span><span class="p">)</span>
    <span class="k">val</span> <span class="py">d</span> <span class="p">=</span> <span class="m">10.</span><span class="n">downTo</span><span class="p">(</span><span class="m">1</span><span class="p">)</span> <span class="c1">//不能用10..1</span>
    <span class="k">for</span><span class="p">(</span><span class="n">x</span> <span class="k">in</span> <span class="n">d</span><span class="p">)</span> <span class="n">println</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

    <span class="n">println</span><span class="p">(</span><span class="s">"=====省略括号======"</span><span class="p">)</span>
    <span class="k">val</span> <span class="py">e</span> <span class="p">=</span> <span class="m">10</span> <span class="n">downTo</span> <span class="m">1</span>
    <span class="k">for</span><span class="p">(</span><span class="n">x</span> <span class="k">in</span> <span class="n">e</span><span class="p">)</span> <span class="n">println</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

    <span class="n">println</span><span class="p">(</span><span class="s">"=====根据变量声明range======"</span><span class="p">)</span>
    <span class="k">val</span> <span class="py">m</span> <span class="p">=</span> <span class="m">8</span>
    <span class="k">val</span> <span class="py">n</span> <span class="p">=</span> <span class="p">-</span><span class="m">3</span>
    <span class="k">val</span> <span class="py">f</span> <span class="p">=</span> <span class="n">IntRange</span><span class="p">(</span><span class="n">Math</span><span class="p">.</span><span class="n">min</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">n</span><span class="p">),</span> <span class="n">Math</span><span class="p">.</span><span class="n">max</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">n</span><span class="p">))</span>
    <span class="k">for</span><span class="p">(</span><span class="n">x</span> <span class="k">in</span> <span class="n">f</span><span class="p">)</span> <span class="n">println</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

    <span class="n">println</span><span class="p">(</span><span class="s">"=====指定步长======"</span><span class="p">)</span>
    <span class="k">val</span> <span class="py">g</span> <span class="p">=</span> <span class="m">100</span> <span class="n">downTo</span> <span class="m">1</span> <span class="n">step</span> <span class="m">3</span>
    <span class="k">for</span><span class="p">(</span><span class="n">x</span> <span class="k">in</span> <span class="n">g</span><span class="p">)</span> <span class="n">print</span><span class="p">(</span><span class="s">"$x\t"</span><span class="p">)</span>
    <span class="n">println</span><span class="p">()</span>
<span class="p">}</span>
</pre></div>
<h3 id="14">1.4 数组</h3>
<h3 id="15-strings-and-string-interpolation">1.5 Strings and String Interpolation</h3>
<div class="highlight"><pre><span></span><span class="k">fun</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">:</span> <span class="n">Array</span><span class="p">&lt;</span><span class="n">String</span><span class="p">&gt;)</span> <span class="p">{</span>
    <span class="n">characters_and_strings</span><span class="p">()</span>
<span class="p">}</span>

<span class="k">fun</span> <span class="nf">characters_and_strings</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//字符</span>
    <span class="n">println</span><span class="p">(</span><span class="s">"=====字符====="</span><span class="p">)</span>
    <span class="k">val</span> <span class="py">a</span><span class="p">:</span><span class="n">Char</span> <span class="p">=</span> <span class="err">'\</span><span class="n">u0041</span><span class="err">'</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">toInt</span><span class="p">()</span> <span class="p">==</span> <span class="m">65</span><span class="p">){</span>
        <span class="n">println</span><span class="p">(</span><span class="s">"match"</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="c1">//字符串</span>
    <span class="n">println</span><span class="p">(</span><span class="s">"=====字符====="</span><span class="p">)</span>
    <span class="k">val</span> <span class="py">b</span><span class="p">:</span><span class="n">String</span> <span class="p">=</span> <span class="s">"Hello"</span>
    <span class="n">println</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
    <span class="n">println</span><span class="p">(</span><span class="s">"取字符串中的字符:${b[0]}"</span><span class="p">)</span>
    <span class="n">println</span><span class="p">(</span><span class="s">"遍历字符串中的字符:"</span><span class="p">)</span>
    <span class="k">for</span><span class="p">(</span><span class="n">letter</span> <span class="k">in</span> <span class="n">b</span><span class="p">)</span> <span class="n">print</span><span class="p">(</span><span class="s">"$letter\t"</span><span class="p">)</span>
    <span class="n">println</span><span class="p">()</span>

    <span class="c1">//原始字符串</span>
    <span class="n">println</span><span class="p">(</span><span class="s">"=====原始字符串====="</span><span class="p">)</span>
    <span class="k">val</span> <span class="py">raw</span> <span class="p">=</span> <span class="s">"""Hello</span>
<span class="s">"test"</span>
<span class="n">world</span><span class="s">"""</span>
    <span class="n">println</span><span class="p">(</span><span class="n">raw</span><span class="p">)</span>

    <span class="c1">//字符串模板</span>
    <span class="n">println</span><span class="p">(</span><span class="s">"=====字符串模板====="</span><span class="p">)</span>
    <span class="k">val</span> <span class="py">c</span> <span class="p">=</span> <span class="m">123.0</span>
    <span class="k">val</span> <span class="py">d</span> <span class="p">=</span> <span class="s">"c = $c, price = ${'$'}${c/10}"</span>
    <span class="n">println</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>

    <span class="c1">//range</span>
    <span class="n">println</span><span class="p">(</span><span class="s">"=====range====="</span><span class="p">)</span>
    <span class="k">val</span> <span class="py">e</span> <span class="p">=</span> <span class="s">"${(10 downTo 1).toList().map { it.toString().toList() }.joinToString()}"</span>
    <span class="n">println</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
<h2 id="2">2. 控制流</h2>
<h3 id="21-nullability">2.1 Nullability</h3>
<p>在kotlin中<code>var x:String = null</code>是不允许的，因为它要求<code>x</code>不能为空。</p>
<div class="highlight"><pre><span></span>fun main(args: Array&lt;String&gt;){}
</pre></div>
<p>对于上面的<code>args</code>表示的是由不能为空的<code>String</code>组成的不能为空的<code>Array</code>。</p>
<p>如果为null该怎么办，在类型名后添加<code>?</code>。</p>
<div class="highlight"><pre><span></span><span class="k">fun</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">:</span> <span class="n">Array</span><span class="p">&lt;</span><span class="n">String</span><span class="p">&gt;)</span> <span class="p">{</span>
    <span class="n">nullability</span><span class="p">()</span>
<span class="p">}</span>

<span class="k">fun</span> <span class="nf">nullability</span><span class="p">(){</span>
    <span class="k">var</span> <span class="py">y</span><span class="p">:</span><span class="n">String</span><span class="p">?</span> <span class="p">=</span> <span class="k">null</span>
    <span class="c1">//下面的是错误的</span>
    <span class="c1">//println(y.length)</span>
    <span class="k">var</span> <span class="py">len</span><span class="p">:</span> <span class="n">Int</span><span class="p">?</span> <span class="p">=</span> <span class="n">y</span><span class="o">?.</span><span class="n">length</span>
    <span class="n">println</span><span class="p">(</span><span class="n">len</span><span class="p">)</span>
    <span class="c1">//或者这样返回-1，其中?:类似else，也就是说如果y是Null，就返回-1</span>
    <span class="k">var</span> <span class="py">len2</span><span class="p">:</span><span class="n">Int</span> <span class="p">=</span> <span class="n">y</span><span class="o">?.</span><span class="n">length</span> <span class="o">?:</span> <span class="p">-</span><span class="m">1</span>
    <span class="n">println</span><span class="p">(</span><span class="n">len2</span><span class="p">)</span>

    <span class="c1">//注意：1.系统库其实自动添加了null 检查，比如 System.out.println，其实是System?.out?.println</span>
    <span class="c1">//关闭null检查：y!!.length 如果此时y为null会抛出异常</span>
<span class="p">}</span>
</pre></div>
<h3 id="22-if">2.2 If 语句</h3>
<p>第一种是 <code>? :</code>形式
if语句直接返回值。</p>
<div class="highlight"><pre><span></span><span class="k">fun</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">:</span> <span class="n">Array</span><span class="p">&lt;</span><span class="n">String</span><span class="p">&gt;)</span> <span class="p">{</span>
    <span class="n">if_statement</span><span class="p">()</span>
<span class="p">}</span>

<span class="k">fun</span> <span class="nf">if_statement</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//? :</span>
    <span class="k">val</span> <span class="py">temp</span> <span class="p">=</span> <span class="m">20</span>
    <span class="k">val</span> <span class="py">feel</span> <span class="p">=</span> <span class="k">if</span> <span class="p">(</span><span class="n">temp</span> <span class="p">&lt;</span> <span class="m">10</span><span class="p">)</span>
        <span class="s">"cold"</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">temp</span> <span class="p">&gt;</span> <span class="m">20</span><span class="p">)</span>
        <span class="s">"warm"</span>
    <span class="k">else</span> <span class="s">"ok"</span>

    <span class="n">println</span><span class="p">(</span><span class="s">"it feels $feel outside"</span><span class="p">)</span>
    <span class="n">println</span><span class="p">(</span><span class="s">"it is ${if(temp &gt; 20) "</span><span class="n">warm</span><span class="s">" else "</span><span class="n">ok</span><span class="s">"} today"</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
<h3 id="23-flow-based-typing">2.3 根据循环自动类型转换(Flow-Based Typing)</h3>
<div class="highlight"><pre><span></span><span class="k">fun</span> <span class="nf">flow_based_typing</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">var</span> <span class="py">s</span><span class="p">:</span><span class="n">String</span><span class="p">?</span> <span class="p">=</span> <span class="s">"hjkh"</span>
    <span class="k">if</span><span class="p">(</span><span class="n">s</span><span class="p">!=</span><span class="k">null</span><span class="p">){</span>
        <span class="c1">//不需要s?.length</span>
        <span class="n">println</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">var</span> <span class="py">x</span><span class="p">:</span> <span class="n">Cloneable</span> <span class="p">=</span> <span class="n">intArrayOf</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="k">is</span> <span class="n">IntArray</span><span class="p">){</span>
        <span class="c1">//不需要(x as IntArray).size</span>
        <span class="n">println</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="n">size</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<h3 id="24-forfor-iteration">2.4 for遍历(for Iteration)</h3>
<div class="highlight"><pre><span></span><span class="k">fun</span> <span class="nf">for_loop</span><span class="p">(){</span>
    <span class="c1">//普通for循环</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">a</span> <span class="k">in</span> <span class="p">(</span><span class="m">10</span> <span class="n">downTo</span> <span class="m">1</span><span class="p">))</span> <span class="n">print</span><span class="p">(</span><span class="s">"$a\t"</span><span class="p">)</span>
    <span class="n">println</span><span class="p">()</span>

    <span class="c1">//数组for循环</span>
    <span class="k">val</span> <span class="py">ints</span> <span class="p">=</span> <span class="n">intArrayOf</span><span class="p">(</span><span class="m">4</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span>
    <span class="k">for</span><span class="p">((</span><span class="n">index</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="k">in</span> <span class="n">ints</span><span class="p">.</span><span class="n">withIndex</span><span class="p">()){</span>
        <span class="n">println</span><span class="p">(</span><span class="s">"$index:\t$value"</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="c1">//字典for循环</span>
    <span class="k">val</span> <span class="py">capitals</span> <span class="p">=</span> <span class="n">mapOf</span><span class="p">(</span><span class="s">"Paris"</span> <span class="n">to</span> <span class="s">"France"</span><span class="p">,</span> <span class="s">"London"</span> <span class="n">to</span> <span class="s">"UK"</span><span class="p">)</span>
    <span class="k">for</span> <span class="p">((</span><span class="n">capital</span><span class="p">,</span> <span class="n">country</span><span class="p">)</span> <span class="k">in</span> <span class="n">capitals</span><span class="p">){</span>
        <span class="n">println</span><span class="p">(</span><span class="s">"${country}'s capital is $capital"</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<h3 id="25-when">2.5 when表达式</h3>
<h2 id="3">3. 函数</h2>
<h3 id="31-top-level-function">3.1 顶层函数(Top-Level Function)</h3>
<p>谈论顶层函数之前需要先讨论package，如果没有指定package，就会放到默认包中。</p>
<div class="highlight"><pre><span></span><span class="k">package</span> <span class="nn">KotlinSamples.Functions</span>
<span class="k">fun</span> <span class="nf">say_hello</span><span class="p">(){</span>
    <span class="n">println</span><span class="p">(</span><span class="s">"Hello"</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
<div class="highlight"><pre><span></span><span class="k">import</span> <span class="nn">KotlinSamples.Functions.*</span>
<span class="k">fun</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">:</span> <span class="n">Array</span><span class="p">&lt;</span><span class="n">String</span><span class="p">&gt;)</span> <span class="p">{</span>
    <span class="n">say_hello</span><span class="p">()</span>
<span class="p">}</span>
</pre></div>
<h3 id="32-return-types-and-arguments">3.2 返回类型和参数(Return Types and Arguments)</h3>
<div class="highlight"><pre><span></span><span class="k">fun</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">:</span> <span class="n">Array</span><span class="p">&lt;</span><span class="n">String</span><span class="p">&gt;)</span> <span class="p">{</span>
    <span class="n">println</span><span class="p">(</span><span class="s">"4*3 is ${triple(4)}"</span><span class="p">)</span>
    <span class="n">println</span><span class="p">(</span><span class="s">"4*4 is ${sqr(4)}"</span><span class="p">)</span>
    <span class="n">println</span><span class="p">(</span><span class="s">"pay ${calculate_wages(160)}"</span><span class="p">)</span>
    <span class="c1">//命名参数</span>
    <span class="n">println</span><span class="p">(</span><span class="s">"pay ${calculate_wages(hourly_rate = 20.0)}"</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">fun</span> <span class="nf">triple</span><span class="p">(</span><span class="n">x</span><span class="p">:</span><span class="n">Int</span><span class="p">):</span> <span class="n">Int</span><span class="p">{</span>
    <span class="k">return</span> <span class="n">x</span><span class="p">*</span><span class="m">3</span>
<span class="p">}</span>

<span class="k">fun</span> <span class="nf">sqr</span><span class="p">(</span><span class="n">x</span><span class="p">:</span><span class="n">Int</span><span class="p">)</span> <span class="p">=</span> <span class="n">x</span> <span class="p">*</span> <span class="n">x</span>

<span class="c1">//默认参数</span>
<span class="k">fun</span> <span class="nf">calculate_wages</span><span class="p">(</span><span class="n">hours</span><span class="p">:</span><span class="n">Int</span> <span class="p">=</span> <span class="m">160</span><span class="p">,</span> <span class="n">hourly_rate</span><span class="p">:</span><span class="n">Double</span> <span class="p">=</span> <span class="m">100.0</span><span class="p">):</span> <span class="n">Double</span><span class="p">{</span>
    <span class="k">return</span> <span class="n">hours</span><span class="p">*</span><span class="n">hourly_rate</span>
<span class="p">}</span>
</pre></div>
<h3 id="33-variable-argument-functions">3.3 可变长参数函数(Variable-Argument Functions)</h3>
<div class="highlight"><pre><span></span><span class="k">fun</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">:</span> <span class="n">Array</span><span class="p">&lt;</span><span class="n">String</span><span class="p">&gt;)</span> <span class="p">{</span>
    <span class="n">println</span><span class="p">(</span><span class="s">"result is ${sum_up(1, 3, 5)}"</span><span class="p">)</span>
    <span class="n">println</span><span class="p">(</span><span class="s">"result is ${sum_up2(4, 5, 6)}"</span><span class="p">)</span>
    <span class="c1">//解包操作</span>
    <span class="k">val</span> <span class="py">stuff</span> <span class="p">=</span> <span class="n">intArrayOf</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">2</span> <span class="p">,</span><span class="m">3</span><span class="p">)</span>
    <span class="n">println</span><span class="p">(</span><span class="n">sum_up</span><span class="p">(</span><span class="m">3</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="p">*</span><span class="n">stuff</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">9</span><span class="p">))</span>
<span class="p">}</span>

<span class="c1">//可变长参数</span>
<span class="k">fun</span> <span class="nf">sum_up</span><span class="p">(</span><span class="k">vararg</span> <span class="n">values</span><span class="p">:</span><span class="n">Int</span><span class="p">):</span><span class="n">Int</span><span class="p">{</span>
    <span class="k">var</span> <span class="py">result</span> <span class="p">=</span> <span class="m">0</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">v</span> <span class="k">in</span> <span class="n">values</span><span class="p">){</span>
        <span class="n">result</span> <span class="p">+=</span> <span class="n">v</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">result</span>
<span class="p">}</span>

<span class="c1">//函数式的解法</span>
<span class="k">fun</span> <span class="nf">sum_up2</span><span class="p">(</span><span class="k">vararg</span> <span class="n">values</span><span class="p">:</span><span class="n">Int</span><span class="p">):</span><span class="n">Int</span><span class="p">{</span>
    <span class="k">return</span> <span class="n">values</span><span class="p">.</span><span class="n">sum</span><span class="p">()</span>
<span class="p">}</span>
</pre></div>
<h3 id="34-local-aka-nested-or-inner-functions">3.4 内签函数(Local a.k.a. Nested or Inner Functions)</h3>
<div class="highlight"><pre><span></span><span class="k">fun</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">:</span> <span class="n">Array</span><span class="p">&lt;</span><span class="n">String</span><span class="p">&gt;)</span> <span class="p">{</span>
    <span class="c1">//解包赋值</span>
    <span class="k">val</span> <span class="err">(</span><span class="py">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">)</span> <span class="p">=</span> <span class="n">solve_quadratic_equation</span><span class="p">(</span><span class="m">1.0</span><span class="p">,</span> <span class="m">10.0</span><span class="p">,</span> <span class="m">16.0</span><span class="p">)</span>
    <span class="n">println</span><span class="p">(</span><span class="s">"x1 = $x1, x2 = $x2"</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">fun</span> <span class="nf">solve_quadratic_equation</span><span class="p">(</span><span class="n">a</span><span class="p">:</span><span class="n">Double</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span><span class="n">Double</span><span class="p">,</span> <span class="n">c</span><span class="p">:</span><span class="n">Double</span><span class="p">):</span> <span class="n">Pair</span><span class="p">&lt;</span><span class="n">Double</span><span class="p">,</span> <span class="n">Double</span><span class="p">&gt;</span>
<span class="p">{</span>
    <span class="k">fun</span> <span class="nf">calculate_discriminant</span><span class="p">():</span> <span class="n">Double</span><span class="p">{</span>
        <span class="k">return</span> <span class="n">b</span><span class="p">*</span><span class="n">b</span> <span class="p">-</span> <span class="m">4</span><span class="p">*</span><span class="n">a</span><span class="p">*</span><span class="n">c</span>
    <span class="p">}</span>
    <span class="k">val</span> <span class="py">root_disc</span> <span class="p">=</span> <span class="n">Math</span><span class="p">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">calculate_discriminant</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">Pair</span><span class="p">((-</span><span class="n">b</span><span class="p">+</span><span class="n">root_disc</span><span class="p">)/(</span><span class="m">2</span><span class="p">*</span><span class="n">a</span><span class="p">),</span> <span class="p">(-</span><span class="n">b</span><span class="p">-</span><span class="n">root_disc</span><span class="p">)/(</span><span class="m">2</span><span class="p">*</span><span class="n">a</span><span class="p">))</span>
<span class="p">}</span>
</pre></div>
<h3 id="35-extension-functions-and-properties">3.5 扩展函数和扩展属性(Extension Functions and Properties)</h3>
<div class="highlight"><pre><span></span><span class="k">import</span> <span class="nn">java.util.*</span>

<span class="k">fun</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">:</span> <span class="n">Array</span><span class="p">&lt;</span><span class="n">String</span><span class="p">&gt;)</span> <span class="p">{</span>
    <span class="n">extension_functions</span><span class="p">()</span>
<span class="p">}</span>
<span class="c1">//扩展函数</span>
<span class="k">fun</span> <span class="err">&lt;</span><span class="nf">T</span><span class="p">&gt;</span> <span class="n">ArrayList</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;.</span><span class="n">swap</span><span class="p">(</span><span class="n">index1</span><span class="p">:</span><span class="n">Int</span><span class="p">,</span> <span class="n">index2</span><span class="p">:</span><span class="n">Int</span><span class="p">){</span>
    <span class="c1">//this指向实例</span>
    <span class="k">val</span> <span class="py">temp</span> <span class="p">=</span> <span class="k">this</span><span class="p">[</span><span class="n">index1</span><span class="p">]</span>
    <span class="k">this</span><span class="p">[</span><span class="n">index1</span><span class="p">]</span> <span class="p">=</span> <span class="k">this</span><span class="p">[</span><span class="n">index2</span><span class="p">]</span>
    <span class="k">this</span><span class="p">[</span><span class="n">index2</span><span class="p">]</span> <span class="p">=</span> <span class="n">temp</span>
<span class="p">}</span>

<span class="c1">//给所有的对象添加函数，用Any?</span>
<span class="k">fun</span> <span class="nf">Any</span><span class="o">?.</span><span class="n">print</span><span class="p">(){</span>
    <span class="k">if</span><span class="p">(</span> <span class="k">this</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span> <span class="n">println</span><span class="p">(</span><span class="s">"Object is null"</span><span class="p">)</span>
    <span class="k">else</span> <span class="n">println</span><span class="p">(</span><span class="s">"Object is ${this.toString()}"</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">//扩展函数</span>
<span class="k">val</span> <span class="py">String</span><span class="o">?.</span><span class="n">empty</span><span class="p">:</span> <span class="n">Boolean</span>
    <span class="k">get</span><span class="p">()</span> <span class="p">=</span> <span class="p">(</span><span class="k">this</span> <span class="p">==</span> <span class="k">null</span> <span class="p">||</span> <span class="k">this</span><span class="p">.</span><span class="n">length</span> <span class="p">==</span> <span class="m">0</span><span class="p">)</span>

<span class="k">fun</span> <span class="nf">extension_functions</span><span class="p">(){</span>
    <span class="k">val</span> <span class="py">mylist</span> <span class="p">=</span> <span class="n">arrayListOf</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">)</span>
    <span class="c1">//调用扩展函数</span>
    <span class="n">mylist</span><span class="p">.</span><span class="n">swap</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">2</span><span class="p">)</span>
    <span class="n">println</span><span class="p">(</span><span class="n">mylist</span><span class="p">)</span>
    <span class="n">mylist</span><span class="p">.</span><span class="n">print</span><span class="p">()</span>

    <span class="k">val</span> <span class="py">s</span><span class="p">:</span><span class="n">String</span><span class="p">?</span> <span class="p">=</span> <span class="k">null</span>
    <span class="n">s</span><span class="p">.</span><span class="n">print</span><span class="p">()</span>
    <span class="c1">//调用扩展属性</span>
    <span class="n">println</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">empty</span><span class="p">)</span>
    <span class="n">println</span><span class="p">(</span><span class="s">""</span><span class="p">.</span><span class="n">empty</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
<h3 id="36-infix-functions">3.6 中缀函数(Infix Functions)</h3>
<div class="highlight"><pre><span></span><span class="k">fun</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">:</span> <span class="n">Array</span><span class="p">&lt;</span><span class="n">String</span><span class="p">&gt;)</span> <span class="p">{</span>
    <span class="n">infix_functions</span><span class="p">()</span>
<span class="p">}</span>
<span class="c1">//定义中缀函数</span>
<span class="k">infix</span> <span class="k">fun</span> <span class="nf">Double</span><span class="p">.</span><span class="n">averageWith</span><span class="p">(</span><span class="n">other</span><span class="p">:</span> <span class="n">Double</span><span class="p">):</span><span class="n">Double</span><span class="p">{</span>
    <span class="c1">//this是左边的运算符</span>
    <span class="k">return</span> <span class="p">(</span><span class="k">this</span> <span class="p">+</span> <span class="n">other</span><span class="p">)</span> <span class="p">/</span> <span class="m">2.0</span>
<span class="p">}</span>
<span class="k">fun</span> <span class="nf">infix_functions</span><span class="p">(){</span>
    <span class="k">val</span> <span class="py">x</span> <span class="p">=</span> <span class="sc">'z'</span> <span class="n">downTo</span> <span class="sc">'a'</span>
    <span class="k">for</span><span class="p">(</span><span class="n">a</span> <span class="k">in</span> <span class="n">x</span><span class="p">)</span> <span class="n">print</span><span class="p">(</span><span class="s">"$a\t"</span><span class="p">)</span>
    <span class="n">println</span><span class="p">()</span>

    <span class="k">val</span> <span class="py">capitals</span> <span class="p">=</span> <span class="n">mapOf</span><span class="p">(</span><span class="s">"Paris"</span> <span class="n">to</span> <span class="s">"France"</span><span class="p">,</span> <span class="s">"London"</span> <span class="n">to</span> <span class="s">"UK"</span><span class="p">)</span>
    <span class="k">for</span><span class="p">((</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="k">in</span> <span class="n">capitals</span><span class="p">)</span>
        <span class="n">println</span><span class="p">(</span><span class="s">"$key\t$value"</span><span class="p">)</span>
    <span class="n">println</span><span class="p">()</span>

    <span class="c1">//调用中缀函数</span>
    <span class="k">val</span> <span class="py">a</span> <span class="p">=</span> <span class="m">3.0</span>
    <span class="k">val</span> <span class="py">b</span> <span class="p">=</span> <span class="m">10.0</span>
    <span class="n">println</span><span class="p">(</span><span class="s">"The average of $a and $b is ${a averageWith b}"</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
<h2 id="4-lambda">4 Lambda函数</h2>
<h3 id="41-lambda">4.1 Lambda函数</h3>
<div class="highlight"><pre><span></span><span class="k">package</span> <span class="nn">KotlinSamples.Lambda</span>

<span class="k">fun</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">:</span> <span class="n">Array</span><span class="p">&lt;</span><span class="n">String</span><span class="p">&gt;)</span> <span class="p">{</span>
    <span class="k">val</span> <span class="py">product</span> <span class="p">=</span> <span class="p">{</span><span class="n">x</span><span class="p">:</span><span class="n">Int</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span><span class="n">Int</span> <span class="p">-&gt;</span> <span class="n">x</span> <span class="p">*</span> <span class="n">y</span><span class="p">}</span>
    <span class="n">println</span><span class="p">(</span><span class="s">"${product(2, 3)}"</span><span class="p">)</span>
    <span class="c1">//可以把签名放在前面</span>
    <span class="k">val</span> <span class="py">product2</span><span class="p">:(</span><span class="n">Int</span><span class="p">,</span> <span class="n">Int</span><span class="p">)-&gt;</span><span class="n">Int</span> <span class="p">=</span> <span class="p">{</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="p">-&gt;</span> <span class="n">x</span><span class="p">*</span> <span class="n">y</span><span class="p">}</span>
    <span class="n">println</span><span class="p">(</span><span class="s">"${product2(4, 6)}"</span><span class="p">)</span>

    <span class="c1">//lambda作为参数</span>
    <span class="k">val</span> <span class="py">numbers</span> <span class="p">=</span> <span class="n">listOf</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">4</span><span class="p">)</span>
    <span class="k">val</span> <span class="py">n</span> <span class="p">=</span> <span class="n">numbers</span><span class="p">.</span><span class="n">count</span> <span class="p">{</span> <span class="n">it</span> <span class="p">&gt;</span> <span class="m">2</span> <span class="p">}</span> <span class="c1">//等价于number.count({x-&gt;x&gt;2})</span>
    <span class="n">println</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>

    <span class="c1">//闭包,kotlin中允许在lambda中修改外界的值</span>
    <span class="k">var</span> <span class="py">sum</span> <span class="p">=</span> <span class="m">0</span>
    <span class="n">numbers</span><span class="p">.</span><span class="n">forEach</span> <span class="p">{</span> <span class="n">sum</span> <span class="p">+=</span> <span class="n">it</span> <span class="p">}</span>
    <span class="n">println</span><span class="p">(</span><span class="s">"sum of $numbers is $sum"</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
<h3 id="42">4.2 高阶函数</h3>
<p>高阶函数是含有函数作为参数的函数，或者是返回值是函数的函数。</p>
<div class="highlight"><pre><span></span><span class="k">fun</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">:</span> <span class="n">Array</span><span class="p">&lt;</span><span class="n">String</span><span class="p">&gt;)</span> <span class="p">{</span>
    <span class="k">val</span> <span class="py">numbers</span> <span class="p">=</span> <span class="n">listOf</span><span class="p">(</span><span class="m">7</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">4</span><span class="p">)</span>
    <span class="k">val</span> <span class="py">maxvalue</span> <span class="p">=</span> <span class="n">max</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span> <span class="p">{</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="p">-&gt;</span> <span class="n">x</span> <span class="p">&lt;</span> <span class="n">y</span><span class="p">}</span>
    <span class="n">println</span><span class="p">(</span><span class="n">maxvalue</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">fun</span> <span class="err">&lt;</span><span class="nf">T</span><span class="p">&gt;</span> <span class="n">max</span><span class="p">(</span><span class="n">collection</span><span class="p">:</span> <span class="n">Collection</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;,</span> <span class="n">less</span><span class="p">:(</span><span class="n">T</span><span class="p">,</span> <span class="n">T</span><span class="p">)-&gt;</span><span class="n">Boolean</span><span class="p">):</span> <span class="n">T</span><span class="p">?{</span>
    <span class="k">var</span> <span class="py">max</span><span class="p">:</span><span class="n">T</span><span class="p">?</span> <span class="p">=</span> <span class="k">null</span>
    <span class="k">for</span><span class="p">(</span><span class="n">x</span> <span class="k">in</span> <span class="n">collection</span><span class="p">){</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">max</span> <span class="p">==</span> <span class="k">null</span> <span class="p">||</span> <span class="n">less</span><span class="p">(</span><span class="n">max</span><span class="p">,</span> <span class="n">x</span><span class="p">))</span>
            <span class="n">max</span> <span class="p">=</span> <span class="n">x</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">max</span>
<span class="p">}</span>
</pre></div>
<h3 id="43">4.3 带接受者的函数类型</h3>
<div class="highlight"><pre><span></span><span class="k">fun</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">:</span> <span class="n">Array</span><span class="p">&lt;</span><span class="n">String</span><span class="p">&gt;)</span> <span class="p">{</span>
    <span class="c1">//Function type with receiver</span>
    <span class="c1">//类似扩展函数,但是只能作用于局部,而且这个函数是个lambda表达式,被存储在变量中</span>
    <span class="n">fun_type_with_recevier</span><span class="p">()</span>
    <span class="c1">//由于increaseBy是局部变量,因此下面的代码无法执行</span>
    <span class="c1">//var y = 2</span>
    <span class="c1">//y.increaseBy(10)</span>
<span class="p">}</span>

<span class="k">fun</span> <span class="nf">fun_type_with_recevier</span><span class="p">(){</span>
    <span class="c1">//声明形式类似扩展函数,但是返回到变量中</span>
    <span class="k">val</span> <span class="py">increaseBy</span> <span class="p">=</span> <span class="k">fun</span> <span class="nf">Int</span><span class="p">.(</span><span class="n">value</span><span class="p">:</span><span class="n">Int</span><span class="p">)</span> <span class="p">=</span> <span class="k">this</span> <span class="p">+</span> <span class="n">value</span>
    <span class="k">var</span> <span class="py">x</span> <span class="p">=</span> <span class="m">1</span>
    <span class="n">println</span><span class="p">(</span><span class="s">"$x + 3 = ${x.increaseBy(3)}"</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
<h3 id="44-functors">4.4 Functors</h3>
<p>不知道为什么，一直报错：Error:(10, 15) Kotlin: operator modifier is required on 'invoke' in 'Average'</p>
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Average</span><span class="p">{</span>
    <span class="k">public</span> <span class="k">fun</span> <span class="nf">invoke</span><span class="p">(</span><span class="k">vararg</span> <span class="n">values</span><span class="p">:</span> <span class="n">Double</span><span class="p">):</span><span class="n">Double</span><span class="p">{</span>
        <span class="k">val</span> <span class="py">sum</span> <span class="p">=</span> <span class="n">values</span><span class="p">.</span><span class="n">sum</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">sum</span><span class="p">/</span><span class="n">values</span><span class="p">.</span><span class="n">size</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="k">fun</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">:</span> <span class="n">Array</span><span class="p">&lt;</span><span class="n">String</span><span class="p">&gt;)</span> <span class="p">{</span>
    <span class="k">val</span> <span class="py">a</span> <span class="p">=</span> <span class="n">Average</span><span class="p">()</span>
    <span class="c1">//functor</span>
    <span class="k">val</span> <span class="py">avg</span> <span class="p">=</span> <span class="n">a</span><span class="p">(</span><span class="m">1.0</span><span class="p">,</span> <span class="m">2.0</span><span class="p">,</span> <span class="m">3.0</span><span class="p">)</span>
    <span class="n">println</span><span class="p">(</span><span class="n">avg</span><span class="p">)</span>
<span class="c1">//    fun String.invoke():String{</span>
<span class="c1">//        return "("+this+")"</span>
<span class="c1">//    }</span>
<span class="c1">//    val str = "hello"</span>
<span class="c1">//    println("${str()}")</span>
<span class="p">}</span>
</pre></div>
<h2 id="5">5 类</h2>
<h3 id="51-property">5.1 属性(property)</h3>
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Person</span><span class="p">{</span>
    <span class="k">lateinit</span> <span class="k">var</span> <span class="py">name</span><span class="p">:</span><span class="n">String</span> <span class="c1">//如果不初始化,需要加lateinit</span>
    <span class="k">var</span> <span class="py">age</span><span class="p">:</span><span class="n">Int</span> <span class="p">=</span> <span class="p">-</span><span class="m">1</span>
    <span class="k">val</span> <span class="py">canVote</span><span class="p">:</span><span class="n">Boolean</span>
        <span class="k">get</span><span class="p">()</span> <span class="p">=</span> <span class="n">age</span> <span class="p">&gt;</span> <span class="m">16</span>
    <span class="k">var</span> <span class="py">ssn</span> <span class="p">=</span> <span class="s">"00000"</span>
        <span class="k">get</span><span class="p">()</span> <span class="p">=</span> <span class="n">field</span>
        <span class="k">set</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">println</span><span class="p">(</span><span class="s">"$name's ssn is changed to $value"</span><span class="p">)</span>
            <span class="n">field</span> <span class="p">=</span> <span class="n">value</span>
        <span class="p">}</span>
<span class="p">}</span>

<span class="k">fun</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">:</span> <span class="n">Array</span><span class="p">&lt;</span><span class="n">String</span><span class="p">&gt;)</span> <span class="p">{</span>
    <span class="k">var</span> <span class="py">me</span> <span class="p">=</span> <span class="n">Person</span><span class="p">()</span>
    <span class="n">me</span><span class="p">.</span><span class="n">name</span> <span class="p">=</span> <span class="s">"lixiang"</span>
    <span class="n">me</span><span class="p">.</span><span class="n">age</span> <span class="p">=</span> <span class="m">28</span>
    <span class="n">println</span><span class="p">(</span><span class="s">"${me.name} can ${if (!me.canVote) "</span><span class="n">not</span> <span class="s">" else ""}vote"</span><span class="p">)</span>
    <span class="n">me</span><span class="p">.</span><span class="n">ssn</span> <span class="p">=</span> <span class="s">"123456"</span>
<span class="p">}</span>
</pre></div>
<h3 id="52">5.2 构造函数和初始化</h3>
<div class="highlight"><pre><span></span><span class="c1">//注意,class的构造中需要给参数带上var或者val才是添加属性</span>
<span class="k">class</span> <span class="nc">Human</span><span class="p">(</span><span class="k">var</span> <span class="py">name</span><span class="p">:</span><span class="n">String</span><span class="p">,</span> <span class="k">val</span> <span class="py">age</span><span class="p">:</span><span class="n">Int</span><span class="p">){</span>
    <span class="c1">//初始化</span>
    <span class="n">init</span><span class="p">{</span>
        <span class="n">println</span><span class="p">(</span><span class="s">"$name is $age"</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="k">fun</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">:</span> <span class="n">Array</span><span class="p">&lt;</span><span class="n">String</span><span class="p">&gt;)</span> <span class="p">{</span>
    <span class="k">var</span> <span class="py">me</span> <span class="p">=</span> <span class="n">Human</span><span class="p">(</span><span class="s">"Lixiang"</span><span class="p">,</span> <span class="m">28</span><span class="p">)</span>
    <span class="n">println</span><span class="p">(</span><span class="s">"My name is ${me.name}, and my age is ${me.age}"</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
<h3 id="53-delegated-properties">5.3 委托属性(Delegated Properties)</h3>
<div class="highlight"><pre><span></span><span class="k">package</span> <span class="nn">KotlinSample.demo3</span>

<span class="k">import</span> <span class="nn">kotlin.properties.Delegates</span>
<span class="k">import</span> <span class="nn">kotlin.reflect.KProperty</span>

<span class="k">class</span> <span class="nc">Delegate</span><span class="p">{</span>
    <span class="k">operator</span> <span class="k">fun</span> <span class="nf">getValue</span><span class="p">(</span><span class="n">thisRef</span><span class="p">:</span><span class="n">Any</span><span class="p">?,</span> <span class="n">property</span><span class="p">:</span> <span class="n">KProperty</span><span class="p">&lt;*&gt;):</span><span class="n">String</span><span class="p">{</span>
        <span class="k">return</span> <span class="s">"$thisRef, thank you for delegating '${property.name}' to me!"</span>
    <span class="p">}</span>

    <span class="k">operator</span> <span class="k">fun</span> <span class="nf">setValue</span><span class="p">(</span><span class="n">thisRef</span><span class="p">:</span> <span class="n">Any</span><span class="p">?,</span> <span class="n">property</span><span class="p">:</span> <span class="n">KProperty</span><span class="p">&lt;*&gt;,</span> <span class="n">value</span><span class="p">:</span><span class="n">String</span><span class="p">){</span>
        <span class="n">println</span><span class="p">(</span><span class="s">"$value has been assigned to '${property.name}' in $thisRef"</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">Person</span><span class="p">{</span>
    <span class="c1">//委托</span>
    <span class="k">var</span> <span class="py">name</span><span class="p">:</span> <span class="n">String</span> <span class="k">by</span> <span class="n">Delegate</span><span class="p">()</span>
    <span class="c1">//委托的一种用法,惰性</span>
    <span class="k">val</span> <span class="py">lazyValue</span><span class="p">:</span> <span class="n">String</span> <span class="k">by</span> <span class="n">lazy</span> <span class="p">{</span>
        <span class="n">println</span><span class="p">(</span><span class="s">"lazyValue初始化"</span><span class="p">)</span>
        <span class="s">"test"</span>
    <span class="p">}</span>

    <span class="c1">//委托的用法,通知,其中"John"是初始值</span>
    <span class="k">var</span> <span class="py">othername</span><span class="p">:</span> <span class="n">String</span> <span class="k">by</span> <span class="n">Delegates</span><span class="p">.</span><span class="n">observable</span><span class="p">(</span><span class="s">"John"</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">prop</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span> <span class="p">-&gt;</span> <span class="n">println</span><span class="p">(</span><span class="s">"${prop.name} $old -&gt; $new"</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="k">fun</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">:</span> <span class="n">Array</span><span class="p">&lt;</span><span class="n">String</span><span class="p">&gt;)</span> <span class="p">{</span>
    <span class="k">var</span> <span class="py">p</span> <span class="p">=</span> <span class="n">Person</span><span class="p">()</span>
    <span class="n">p</span><span class="p">.</span><span class="n">name</span> <span class="p">=</span> <span class="s">"Lixiang"</span>
    <span class="k">val</span> <span class="py">s</span> <span class="p">=</span> <span class="n">p</span><span class="p">.</span><span class="n">name</span>
    <span class="n">println</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
    <span class="c1">//只求一次值</span>
    <span class="n">println</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">lazyValue</span><span class="p">)</span>
    <span class="n">println</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">lazyValue</span><span class="p">)</span>
    <span class="n">println</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">lazyValue</span><span class="p">)</span>
    <span class="n">p</span><span class="p">.</span><span class="n">othername</span> <span class="p">=</span> <span class="s">"Jack"</span>
<span class="p">}</span>
</pre></div>
<h3 id="54-data-classes">5.4 数据类(Data Classes)</h3>
<p>数据类主要用来存储数据</p>
<div class="highlight"><pre><span></span><span class="k">package</span> <span class="nn">KotlinSample.demo4</span>

<span class="c1">//data class用来保存数据,他有以下几种方法</span>
<span class="c1">//equals()/hashCode()</span>
<span class="c1">//toString()</span>
<span class="c1">//copy() 深拷贝</span>
<span class="c1">//destructuring 解包操作</span>
<span class="k">data</span> <span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="k">val</span> <span class="py">name</span><span class="p">:</span><span class="n">String</span><span class="p">,</span> <span class="k">val</span> <span class="py">age</span><span class="p">:</span> <span class="n">Int</span><span class="p">){</span>
    <span class="c1">//你也可以重写</span>
    <span class="k">override</span> <span class="k">fun</span> <span class="nf">toString</span><span class="p">():</span> <span class="n">String</span><span class="p">{</span>
        <span class="k">return</span> <span class="s">"My name is $name, age is $age"</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">fun</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">:</span> <span class="n">Array</span><span class="p">&lt;</span><span class="n">String</span><span class="p">&gt;)</span> <span class="p">{</span>
    <span class="k">val</span> <span class="py">a</span> <span class="p">=</span> <span class="n">User</span><span class="p">(</span><span class="s">"Lixiang"</span><span class="p">,</span> <span class="m">20</span><span class="p">)</span>
    <span class="n">println</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="k">val</span> <span class="py">b</span> <span class="p">=</span> <span class="n">User</span><span class="p">(</span><span class="s">"Lixiang"</span><span class="p">,</span> <span class="m">20</span><span class="p">)</span>
    <span class="n">println</span><span class="p">(</span><span class="n">a</span> <span class="p">==</span> <span class="n">b</span><span class="p">)</span>
    <span class="n">println</span><span class="p">(</span><span class="n">a</span> <span class="p">===</span> <span class="n">b</span><span class="p">)</span>
    <span class="k">val</span> <span class="py">c</span> <span class="p">=</span> <span class="n">a</span><span class="p">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">println</span><span class="p">(</span><span class="n">c</span> <span class="p">==</span> <span class="n">a</span><span class="p">)</span>
    <span class="n">println</span><span class="p">(</span><span class="n">c</span> <span class="p">===</span><span class="n">a</span><span class="p">)</span>
    <span class="c1">//解包</span>
    <span class="k">val</span> <span class="err">(</span><span class="py">name</span><span class="p">,</span> <span class="n">age</span><span class="p">)</span> <span class="p">=</span> <span class="n">c</span>
    <span class="n">println</span><span class="p">(</span><span class="s">"$name, $age"</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
<h3 id="55-singleton">5.5 单例(Singleton)</h3>
<div class="highlight"><pre><span></span><span class="k">package</span> <span class="nn">KotlinSample.demo5</span>

<span class="k">class</span> <span class="nc">PointFactory</span><span class="p">{</span>
    <span class="k">fun</span> <span class="nf">NewCartersianPoint</span><span class="p">(</span><span class="n">x</span><span class="p">:</span><span class="n">Double</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span><span class="n">Double</span><span class="p">):</span> <span class="n">Point</span><span class="p">{</span>
        <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">fun</span> <span class="nf">NewPolarPoint</span><span class="p">(</span><span class="n">rho</span><span class="p">:</span> <span class="n">Double</span><span class="p">,</span> <span class="n">theta</span><span class="p">:</span> <span class="n">Double</span><span class="p">):</span> <span class="n">Point</span><span class="p">{</span>
        <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="n">rho</span><span class="p">*</span><span class="n">Math</span><span class="p">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">),</span> <span class="n">rho</span><span class="p">*</span><span class="n">Math</span><span class="p">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">))</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">Point</span><span class="p">(</span><span class="k">val</span> <span class="py">x</span><span class="p">:</span> <span class="n">Double</span><span class="p">,</span> <span class="k">val</span> <span class="py">y</span><span class="p">:</span> <span class="n">Double</span><span class="p">)</span>

<span class="k">fun</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">:</span> <span class="n">Array</span><span class="p">&lt;</span><span class="n">String</span><span class="p">&gt;)</span> <span class="p">{</span>
    <span class="k">var</span> <span class="py">pf</span> <span class="p">=</span> <span class="n">PointFactory</span><span class="p">()</span>
    <span class="k">var</span> <span class="py">point</span> <span class="p">=</span> <span class="n">pf</span><span class="p">.</span><span class="n">NewPolarPoint</span><span class="p">(</span><span class="m">3.0</span><span class="p">,</span> <span class="n">Math</span><span class="p">.</span><span class="n">PI</span><span class="p">/</span><span class="m">2</span><span class="p">)</span>
    <span class="n">print</span><span class="p">(</span><span class="s">"${point.x} ${point.y}"</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
<h3 id="56-companion-objects">5.6 伴随对象(Companion Objects)</h3>
<p>Kotlin中没有静态方法，使用伴随对象来实现类似静态方法的效果</p>
<div class="highlight"><pre><span></span><span class="k">package</span> <span class="nn">KotlinSample.demo6</span>

<span class="k">interface</span> <span class="nc">IFactory</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="p">{</span>
    <span class="k">fun</span> <span class="nf">create</span><span class="p">():</span> <span class="n">T</span>
<span class="p">}</span>

<span class="c1">//注意,伴随对象并不是真正的static的</span>
<span class="k">class</span> <span class="nc">Point</span><span class="p">(</span><span class="k">var</span> <span class="py">x</span><span class="p">:</span> <span class="n">Double</span><span class="p">,</span> <span class="k">var</span> <span class="py">y</span><span class="p">:</span> <span class="n">Double</span><span class="p">){</span>
    <span class="c1">//伴随对象,使用companion object修饰,其中Factory可以注释掉,也就是下面的代码也是可用的:</span>
    <span class="c1">//companion object {</span>
    <span class="c1">//伴随对象还能实现接口</span>
    <span class="k">companion</span> <span class="k">object</span> <span class="err">/*</span><span class="nc">Factory</span><span class="p">*/</span> <span class="p">:</span> <span class="n">IFactory</span><span class="p">&lt;</span><span class="n">Point</span><span class="p">&gt;{</span>
        <span class="k">override</span> <span class="k">fun</span> <span class="nf">create</span><span class="p">():</span> <span class="n">Point</span> <span class="p">{</span>
            <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="m">0.0</span><span class="p">,</span> <span class="m">0.0</span><span class="p">)</span>
        <span class="p">}</span>

        <span class="k">fun</span> <span class="nf">createCarterian</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="n">Double</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">Double</span><span class="p">):</span> <span class="n">Point</span> <span class="p">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
        <span class="k">fun</span> <span class="nf">createPolar</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="n">Double</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">Double</span><span class="p">):</span> <span class="n">Point</span> <span class="p">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">fun</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">:</span> <span class="n">Array</span><span class="p">&lt;</span><span class="n">String</span><span class="p">&gt;)</span> <span class="p">{</span>
    <span class="k">var</span> <span class="py">simplePoint</span> <span class="p">=</span> <span class="n">Point</span><span class="p">(</span><span class="m">1.0</span><span class="p">,</span> <span class="m">2.0</span><span class="p">)</span>

    <span class="c1">//var factoryPoint = Point.Factory.createCarterian(1.0, 2.0)</span>
    <span class="c1">//类似静态方法的调用</span>
    <span class="k">var</span> <span class="py">factoryPoint2</span> <span class="p">=</span> <span class="n">Point</span><span class="p">.</span><span class="n">createPolar</span><span class="p">(</span><span class="m">1.0</span><span class="p">,</span> <span class="m">2.0</span><span class="p">)</span>

    <span class="k">var</span> <span class="py">defaultPoint</span> <span class="p">=</span> <span class="n">Point</span><span class="p">.</span><span class="n">create</span><span class="p">()</span>
    <span class="c1">//或者如果没有给伴随对象起名字,也可以用下面这个方法</span>
    <span class="k">var</span> <span class="py">defaultPoint2</span> <span class="p">=</span> <span class="n">Point</span><span class="p">.</span><span class="n">Companion</span><span class="p">.</span><span class="n">create</span><span class="p">()</span>
<span class="p">}</span>
</pre></div>
<h3 id="57-inheritance">5.7 继承(Inheritance)</h3>
<div class="highlight"><pre><span></span><span class="c1">//只有open的class才能被继承</span>
<span class="k">open</span> <span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="k">val</span> <span class="py">name</span><span class="p">:</span> <span class="n">String</span><span class="p">){</span>
    <span class="c1">//同样只有open方法才能被overwrite</span>
    <span class="k">open</span> <span class="k">fun</span> <span class="nf">talk</span><span class="p">(){</span>
        <span class="n">println</span><span class="p">(</span><span class="s">"I'm $name"</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="c1">//父类已经有了name,所以不能再给这里的name添加val/var</span>
<span class="c1">//Person有构造方法,因此必须对其进行调用</span>
<span class="k">class</span> <span class="nc">Manager</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span> <span class="k">var</span> <span class="py">subordinates</span><span class="p">:</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Person</span><span class="p">&gt;)</span> <span class="p">:</span> <span class="n">Person</span><span class="p">(</span><span class="n">name</span><span class="p">){</span>
    <span class="c1">//重写方法</span>
    <span class="k">override</span> <span class="k">fun</span> <span class="nf">talk</span><span class="p">(){</span>
        <span class="n">println</span><span class="p">(</span><span class="s">"I'm $name, I have ${subordinates.size} subordinates"</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">fun</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">:</span> <span class="n">Array</span><span class="p">&lt;</span><span class="n">String</span><span class="p">&gt;)</span> <span class="p">{</span>
    <span class="k">val</span> <span class="py">lixiang</span> <span class="p">=</span> <span class="n">Person</span><span class="p">(</span><span class="s">"理想"</span><span class="p">)</span>
    <span class="n">lixiang</span><span class="p">.</span><span class="n">talk</span><span class="p">()</span>

    <span class="k">val</span> <span class="py">boss</span> <span class="p">=</span> <span class="n">Manager</span><span class="p">(</span><span class="s">"龙"</span><span class="p">,</span> <span class="n">listOf</span><span class="p">(</span><span class="n">lixiang</span><span class="p">))</span>
    <span class="n">boss</span><span class="p">.</span><span class="n">talk</span><span class="p">()</span>
<span class="p">}</span>
</pre></div>
<h3 id="58-interfaces">5.8 接口(Interfaces)</h3>
<h3 id="59-class-delegation">5.9 类委托(Class Delegation)</h3>
<hr/>
<h2 id="6">6 其他</h2>
<h3 id="61-enumerations">6.1 枚举(Enumerations)</h3>
<h3 id="62-exceptions">6.2 异常(Exceptions)</h3>
<h3 id="63-operator-overloads">6.3 操作符重载(Operator Overloads)</h3>
<h3 id="64-type-safe-builders">6.4 Type-Safe Builders</h3>
            </div><!-- /.entry-content -->
        
 
            <section>
            <div id="DuoShuoComment" aria-live="polite">
<!-- 多说评论框 start -->
    <div class="ds-thread" data-thread-key="kotlinxue-xi-bi-ji.html" data-title="Kotlin学习笔记" data-url="./kotlinxue-xi-bi-ji.html"></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"liulixiang1988blog"};
    (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0] 
         || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
    </script>
<!-- 多说公共JS代码 end -->
            </div>
            </section> 

        </div><!-- /.eleven.columns -->

<div class="three columns">

<nav class="widget">
  <h4>社交</h4>
  <ul class="blank">
    <li><a href="https://www.zhihu.com/people/liulixiang1988">知乎</a></li>
    <li><a href="http://weibo.com/liulixiang1988">微博</a></li>
  </ul>
</nav>

<h4>分类</h4>
<ul class="blank">
		<li><a href="./category/android.html">Android</a></li>
		<li><a href="./category/database.html">Database</a></li>
		<li><a href="./category/dotnet.html">DotNet</a></li>
		<li><a href="./category/ionic.html">ionic</a></li>
		<li><a href="./category/java.html">Java</a></li>
		<li><a href="./category/python.html">Python</a></li>
		<li><a href="./category/sheng-huo.html">生活</a></li>
		<li><a href="./category/web.html">Web</a></li>
		<li><a href="./category/yi-dong-kai-fa.html">移动开发</a></li>
</ul>


<h4>标签</h4>
	<ul class="blank">
	    <li class="tag-[<pelican.contents.Article object at 0x104b02550>]"><a href="./tag/gradle.html">Gradle</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x104c4bf98>, <pelican.contents.Article object at 0x1051c22b0>, <pelican.contents.Article object at 0x1051ccef0>, <pelican.contents.Article object at 0x104981978>, <pelican.contents.Article object at 0x104c63400>, <pelican.contents.Article object at 0x104ff12b0>, <pelican.contents.Article object at 0x104981908>, <pelican.contents.Article object at 0x105260710>, <pelican.contents.Article object at 0x1049d3908>, <pelican.contents.Article object at 0x104c8b5f8>, <pelican.contents.Article object at 0x1047f1b00>, <pelican.contents.Article object at 0x104bef080>]"><a href="./tag/javascript.html">JavaScript</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x1049c7d30>, <pelican.contents.Article object at 0x1049c7c18>]"><a href="./tag/ionic.html">ionic</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x104722550>]"><a href="./tag/hibernate.html">Hibernate</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x105119a90>, <pelican.contents.Article object at 0x104b16278>, <pelican.contents.Article object at 0x10512d5f8>, <pelican.contents.Article object at 0x10524bc88>, <pelican.contents.Article object at 0x1052662e8>, <pelican.contents.Article object at 0x105135588>, <pelican.contents.Article object at 0x105147eb8>, <pelican.contents.Article object at 0x104b65fd0>, <pelican.contents.Article object at 0x104cbeac8>, <pelican.contents.Article object at 0x10524b2e8>, <pelican.contents.Article object at 0x1049563c8>, <pelican.contents.Article object at 0x104653d30>, <pelican.contents.Article object at 0x1044b3390>, <pelican.contents.Article object at 0x104b0b1d0>, <pelican.contents.Article object at 0x104966cf8>, <pelican.contents.Article object at 0x104943da0>, <pelican.contents.Article object at 0x1049d6e10>, <pelican.contents.Article object at 0x104956748>, <pelican.contents.Article object at 0x1051c1f28>]"><a href="./tag/css.html">CSS</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x10491edd8>]"><a href="./tag/gulp.html">Gulp</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x10474cc18>, <pelican.contents.Article object at 0x10474ff60>, <pelican.contents.Article object at 0x10477fda0>, <pelican.contents.Article object at 0x1046a7940>, <pelican.contents.Article object at 0x10472d048>]"><a href="./tag/dotnet.html">DotNet</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x104712fd0>]"><a href="./tag/mysql.html">MySQL</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x1049f2a58>, <pelican.contents.Article object at 0x1047cd0b8>, <pelican.contents.Article object at 0x104948320>, <pelican.contents.Article object at 0x10498e470>, <pelican.contents.Article object at 0x104956160>, <pelican.contents.Article object at 0x1049a40f0>, <pelican.contents.Article object at 0x10477beb8>, <pelican.contents.Article object at 0x10497aa90>, <pelican.contents.Article object at 0x1049c6828>]"><a href="./tag/jsp.html">JSP</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x104b04a20>]"><a href="./tag/phonegap.html">PhoneGap</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x103bdbdd8>, <pelican.contents.Article object at 0x1047262b0>, <pelican.contents.Article object at 0x1046ed400>]"><a href="./tag/life.html">life</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x10471f8d0>]"><a href="./tag/flaskbi-ji.html">Flask笔记</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x104b5ada0>, <pelican.contents.Article object at 0x104bebba8>]"><a href="./tag/kotlin.html">Kotlin</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x104bebda0>]"><a href="./tag/c.html">C#</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x104606d30>, <pelican.contents.Article object at 0x10462e898>, <pelican.contents.Article object at 0x105149e80>, <pelican.contents.Article object at 0x104ca5f98>, <pelican.contents.Article object at 0x10495f240>, <pelican.contents.Article object at 0x104b25b70>, <pelican.contents.Article object at 0x104fdbef0>, <pelican.contents.Article object at 0x104bf2828>, <pelican.contents.Article object at 0x104494128>, <pelican.contents.Article object at 0x104634320>, <pelican.contents.Article object at 0x104614940>, <pelican.contents.Article object at 0x104614278>, <pelican.contents.Article object at 0x104491dd8>, <pelican.contents.Article object at 0x1044943c8>]"><a href="./tag/androidxue-xi-bi-ji.html">Android学习笔记</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x10474cac8>]"><a href="./tag/functional-programming.html">Functional Programming</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x103bf7ef0>, <pelican.contents.Article object at 0x104606d30>, <pelican.contents.Article object at 0x10462e898>, <pelican.contents.Article object at 0x105290e80>, <pelican.contents.Article object at 0x104c78f60>, <pelican.contents.Article object at 0x105149e80>, <pelican.contents.Article object at 0x104ca5f98>, <pelican.contents.Article object at 0x10495f240>, <pelican.contents.Article object at 0x104b25b70>, <pelican.contents.Article object at 0x104fdbef0>, <pelican.contents.Article object at 0x104bf2828>, <pelican.contents.Article object at 0x104494128>, <pelican.contents.Article object at 0x104634320>, <pelican.contents.Article object at 0x104614940>, <pelican.contents.Article object at 0x104614278>, <pelican.contents.Article object at 0x104491dd8>, <pelican.contents.Article object at 0x1044943c8>]"><a href="./tag/android.html">Android</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x105149e80>]"><a href="./tag/androiyue-hou-ji-fen.html">Androi阅后即焚</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x104c4bf98>, <pelican.contents.Article object at 0x1051c22b0>, <pelican.contents.Article object at 0x1051ccef0>, <pelican.contents.Article object at 0x104981978>, <pelican.contents.Article object at 0x104ff12b0>, <pelican.contents.Article object at 0x104981908>, <pelican.contents.Article object at 0x105260710>]"><a href="./tag/react.html">React</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x104b42b00>, <pelican.contents.Article object at 0x104c9bc50>, <pelican.contents.Article object at 0x105198dd8>, <pelican.contents.Article object at 0x104b454e0>, <pelican.contents.Article object at 0x1049dda20>, <pelican.contents.Article object at 0x104b5ab38>, <pelican.contents.Article object at 0x104b02550>, <pelican.contents.Article object at 0x10474cac8>, <pelican.contents.Article object at 0x104722550>, <pelican.contents.Article object at 0x1049267f0>, <pelican.contents.Article object at 0x104b067f0>, <pelican.contents.Article object at 0x1049e6160>, <pelican.contents.Article object at 0x104b162e8>, <pelican.contents.Article object at 0x1049f2a58>, <pelican.contents.Article object at 0x1047cd0b8>, <pelican.contents.Article object at 0x104948320>, <pelican.contents.Article object at 0x10498e470>, <pelican.contents.Article object at 0x104956160>, <pelican.contents.Article object at 0x1049a40f0>, <pelican.contents.Article object at 0x10477beb8>, <pelican.contents.Article object at 0x10497aa90>, <pelican.contents.Article object at 0x1049c6828>]"><a href="./tag/java.html">Java</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x1046e1ef0>, <pelican.contents.Article object at 0x104758be0>, <pelican.contents.Article object at 0x104755080>]"><a href="./tag/django.html">Django</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x104be4908>]"><a href="./tag/jquery.html">jQuery</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x1049664a8>]"><a href="./tag/maven.html">Maven</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x104606fd0>, <pelican.contents.Article object at 0x1046b1f28>, <pelican.contents.Article object at 0x1046984e0>, <pelican.contents.Article object at 0x1046ccc18>, <pelican.contents.Article object at 0x104619f98>, <pelican.contents.Article object at 0x10468e0b8>]"><a href="./tag/angular.html">Angular</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x104ca5f98>, <pelican.contents.Article object at 0x10495f240>, <pelican.contents.Article object at 0x104b25b70>, <pelican.contents.Article object at 0x104fdbef0>, <pelican.contents.Article object at 0x104bf2828>]"><a href="./tag/androibo-ke-yue-du.html">Androi博客阅读</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x104bebda0>]"><a href="./tag/nancy.html">Nancy</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x1049e6160>, <pelican.contents.Article object at 0x104b162e8>]"><a href="./tag/servlet.html">Servlet</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x104bebda0>]"><a href="./tag/net.html">.NET</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x104735630>, <pelican.contents.Article object at 0x1046e1ef0>, <pelican.contents.Article object at 0x104758be0>, <pelican.contents.Article object at 0x104755080>, <pelican.contents.Article object at 0x10466e3c8>, <pelican.contents.Article object at 0x104735160>]"><a href="./tag/python.html">Python</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x1051a4400>, <pelican.contents.Article object at 0x105181e48>, <pelican.contents.Article object at 0x105181f60>]"><a href="./tag/compass.html">compass</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x10474cc18>, <pelican.contents.Article object at 0x10474ff60>, <pelican.contents.Article object at 0x10477fda0>, <pelican.contents.Article object at 0x1046a7940>, <pelican.contents.Article object at 0x10472d048>]"><a href="./tag/aspnet-mvc.html">ASP.NET MVC</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x1049d3908>, <pelican.contents.Article object at 0x104726748>, <pelican.contents.Article object at 0x1051a4400>, <pelican.contents.Article object at 0x105181e48>, <pelican.contents.Article object at 0x105181f60>]"><a href="./tag/css3.html">CSS3</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x1046e1ef0>]"><a href="./tag/bu-shu.html">部署</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x104948a20>, <pelican.contents.Article object at 0x1046ed400>]"><a href="./tag/pelican.html">Pelican</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x1052e7f98>, <pelican.contents.Article object at 0x10528fdd8>, <pelican.contents.Article object at 0x10515f0f0>]"><a href="./tag/netty.html">Netty</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x104b5ada0>, <pelican.contents.Article object at 0x104bebba8>]"><a href="./tag/xue-xi-bi-ji.html">学习笔记</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x103c1d208>]"><a href="./tag/android-studio.html">Android Studio</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x104b42b00>, <pelican.contents.Article object at 0x104c9bc50>, <pelican.contents.Article object at 0x105198dd8>, <pelican.contents.Article object at 0x104b454e0>, <pelican.contents.Article object at 0x1049267f0>]"><a href="./tag/spring.html">Spring</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x105147eb8>, <pelican.contents.Article object at 0x104b65fd0>, <pelican.contents.Article object at 0x104cbeac8>, <pelican.contents.Article object at 0x10524b2e8>, <pelican.contents.Article object at 0x1049563c8>, <pelican.contents.Article object at 0x104653d30>, <pelican.contents.Article object at 0x1044b3390>, <pelican.contents.Article object at 0x104b0b1d0>, <pelican.contents.Article object at 0x104966cf8>, <pelican.contents.Article object at 0x104943da0>, <pelican.contents.Article object at 0x1049d6e10>, <pelican.contents.Article object at 0x1051c1f28>]"><a href="./tag/less.html">LESS</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x104b5e9b0>, <pelican.contents.Article object at 0x1047f1e10>, <pelican.contents.Article object at 0x1044b1358>, <pelican.contents.Article object at 0x1046b1668>]"><a href="./tag/shu-ju-fen-xi.html">数据分析</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x104c8b5f8>]"><a href="./tag/mo-kuai-hua.html">模块化</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x1046a79e8>, <pelican.contents.Article object at 0x10471f8d0>]"><a href="./tag/flask.html">Flask</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x1049c7d30>, <pelican.contents.Article object at 0x1049c7c18>]"><a href="./tag/yi-dong-kai-fa.html">移动开发</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x105147eb8>, <pelican.contents.Article object at 0x104b65fd0>, <pelican.contents.Article object at 0x104cbeac8>, <pelican.contents.Article object at 0x10524b2e8>, <pelican.contents.Article object at 0x1049563c8>, <pelican.contents.Article object at 0x104653d30>, <pelican.contents.Article object at 0x1044b3390>, <pelican.contents.Article object at 0x104b0b1d0>, <pelican.contents.Article object at 0x104966cf8>, <pelican.contents.Article object at 0x104943da0>, <pelican.contents.Article object at 0x1049d6e10>, <pelican.contents.Article object at 0x104956748>]"><a href="./tag/html.html">HTML</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x1051a4400>, <pelican.contents.Article object at 0x105181e48>, <pelican.contents.Article object at 0x105181f60>, <pelican.contents.Article object at 0x105119a90>, <pelican.contents.Article object at 0x104b16278>, <pelican.contents.Article object at 0x10512d5f8>, <pelican.contents.Article object at 0x10524bc88>, <pelican.contents.Article object at 0x1052662e8>, <pelican.contents.Article object at 0x105135588>]"><a href="./tag/sass.html">sass</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x104725c50>]"><a href="./tag/exmobi.html">Exmobi</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x104606fd0>, <pelican.contents.Article object at 0x1046b1f28>, <pelican.contents.Article object at 0x1046984e0>, <pelican.contents.Article object at 0x1046ccc18>, <pelican.contents.Article object at 0x104619f98>, <pelican.contents.Article object at 0x10468e0b8>, <pelican.contents.Article object at 0x104b067f0>, <pelican.contents.Article object at 0x1049e6160>, <pelican.contents.Article object at 0x104b162e8>, <pelican.contents.Article object at 0x1049f2a58>, <pelican.contents.Article object at 0x1047cd0b8>, <pelican.contents.Article object at 0x104948320>, <pelican.contents.Article object at 0x10498e470>, <pelican.contents.Article object at 0x104956160>, <pelican.contents.Article object at 0x1049a40f0>, <pelican.contents.Article object at 0x10477beb8>, <pelican.contents.Article object at 0x10497aa90>, <pelican.contents.Article object at 0x1049c6828>, <pelican.contents.Article object at 0x10474cc18>, <pelican.contents.Article object at 0x10474ff60>, <pelican.contents.Article object at 0x10477fda0>, <pelican.contents.Article object at 0x1046a7940>, <pelican.contents.Article object at 0x10472d048>, <pelican.contents.Article object at 0x104bebda0>]"><a href="./tag/web.html">Web</a></li>
	    <li class="tag-[<pelican.contents.Article object at 0x104c8b5f8>]"><a href="./tag/requirejs.html">RequireJS</a></li>
</ul>

</div> </div><!-- /.row -->


</section>

       </div><!-- /.row -->
    </div><!-- /.container -->


       <div class="container.nopad bg">

    
        <footer id="credits" class="row">
          <div class="seven columns left-center">

                   <address id="about" class="vcard body">
                    Proudly powered by <a href="http://getpelican.com/">Pelican</a>,
                    which takes great advantage of <a href="http://python.org">Python</a>.
                    <br />
                    Based on the <a target="_blank" href="http://gumbyframework.com">Gumby Framework</a>
                    </address>
          </div>


          <div class="seven columns">
            <div class="row">
              <ul class="socbtns">





              </ul>
            </div>
          </div>
        </footer>

    </div>


  <script src="./theme/js/libs/jquery-1.9.1.min.js"></script>
  <script src="./theme/js/libs/gumby.min.js"></script>
  <script src="./theme/js/plugins.js"></script>
</body>
</html>